{"remainingRequest":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\js\\geojsondatamerge.js","dependencies":[{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\js\\geojsondatamerge.js","mtime":1582990926052},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgaXNOdW1lcmljIGZyb20gJy4vaXNudW1lcmljJzsKaW1wb3J0IHsgdmFsc1RvQXJyYXkgfSBmcm9tICcuL21ldHJpY19jYWxjdWxhdGlvbnMnOwoKZnVuY3Rpb24gZ2VvanNvbkRhdGFNZXJnZShnLCBkLCB5KSB7CiAgLy8gZ2V0IGFycmF5IG1heAogIHZhciB2YWxzQXJyYXkgPSB2YWxzVG9BcnJheShkLCBbeV0sIE9iamVjdC5rZXlzKGQpKTsKICB2YXIgaGVpZ2h0RmFjdG9yID0gNTAwMCAvIE1hdGgubWF4LmFwcGx5KE1hdGgsIHZhbHNBcnJheSk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgZy5mZWF0dXJlcy5sZW5ndGg7IGkrKykgewogICAgaWYgKGlzTnVtZXJpYyhkW2cuZmVhdHVyZXNbaV0ucHJvcGVydGllcy5pZF1bInlfIi5jb25jYXQoeSldKSkgewogICAgICBnLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMuY2hvcm9wbGV0aCA9IGRbZy5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzLmlkXVsieV8iLmNvbmNhdCh5KV07CiAgICAgIGcuZmVhdHVyZXNbaV0ucHJvcGVydGllcy5oZWlnaHQgPSBkW2cuZmVhdHVyZXNbaV0ucHJvcGVydGllcy5pZF1bInlfIi5jb25jYXQoeSldICogaGVpZ2h0RmFjdG9yOwogICAgfSBlbHNlIHsKICAgICAgZy5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzLmNob3JvcGxldGggPSAnbnVsbCc7CiAgICAgIGcuZmVhdHVyZXNbaV0ucHJvcGVydGllcy5oZWlnaHQgPSAnbnVsbCc7CiAgICB9CiAgfQoKICByZXR1cm4gZzsKfQoKZXhwb3J0IGRlZmF1bHQgZ2VvanNvbkRhdGFNZXJnZTs="},{"version":3,"sources":["C:/Users/yz.liu/Desktop/Experiment/COVID2019/src/js/geojsondatamerge.js"],"names":["isNumeric","valsToArray","geojsonDataMerge","g","d","y","valsArray","Object","keys","heightFactor","Math","max","apply","i","features","length","properties","id","choropleth","height"],"mappings":";AAAA,OAAOA,SAAP,MAAsB,aAAtB;AACA,SAAQC,WAAR,QAA0B,uBAA1B;;AAEA,SAASC,gBAAT,CAA0BC,CAA1B,EAA6BC,CAA7B,EAAgCC,CAAhC,EAAmC;AAC/B;AACA,MAAIC,SAAS,GAAGL,WAAW,CAACG,CAAD,EAAI,CAACC,CAAD,CAAJ,EAASE,MAAM,CAACC,IAAP,CAAYJ,CAAZ,CAAT,CAA3B;AACA,MAAIK,YAAY,GAAG,OAAOC,IAAI,CAACC,GAAL,CAASC,KAAT,CAAeF,IAAf,EAAqBJ,SAArB,CAA1B;;AAEA,OAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,CAAC,CAACW,QAAF,CAAWC,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AACxC,QAAIb,SAAS,CAACI,CAAC,CAACD,CAAC,CAACW,QAAF,CAAWD,CAAX,EAAcG,UAAd,CAAyBC,EAA1B,CAAD,aAAoCZ,CAApC,EAAD,CAAb,EAAyD;AACrDF,MAAAA,CAAC,CAACW,QAAF,CAAWD,CAAX,EAAcG,UAAd,CAAyBE,UAAzB,GAAsCd,CAAC,CAACD,CAAC,CAACW,QAAF,CAAWD,CAAX,EAAcG,UAAd,CAAyBC,EAA1B,CAAD,aAAoCZ,CAApC,EAAtC;AACAF,MAAAA,CAAC,CAACW,QAAF,CAAWD,CAAX,EAAcG,UAAd,CAAyBG,MAAzB,GAAkCf,CAAC,CAACD,CAAC,CAACW,QAAF,CAAWD,CAAX,EAAcG,UAAd,CAAyBC,EAA1B,CAAD,aAAoCZ,CAApC,KAA2CI,YAA7E;AACH,KAHD,MAGQ;AACJN,MAAAA,CAAC,CAACW,QAAF,CAAWD,CAAX,EAAcG,UAAd,CAAyBE,UAAzB,GAAsC,MAAtC;AACAf,MAAAA,CAAC,CAACW,QAAF,CAAWD,CAAX,EAAcG,UAAd,CAAyBG,MAAzB,GAAkC,MAAlC;AACH;AACJ;;AACD,SAAOhB,CAAP;AACH;;AAED,eAAeD,gBAAf","sourcesContent":["import isNumeric from './isnumeric';\r\nimport {valsToArray} from './metric_calculations';\r\n\r\nfunction geojsonDataMerge(g, d, y) {\r\n    // get array max\r\n    let valsArray = valsToArray(d, [y], Object.keys(d));\r\n    let heightFactor = 5000 / Math.max.apply(Math, valsArray);\r\n\r\n    for (let i = 0; i < g.features.length; i++) {\r\n        if (isNumeric(d[g.features[i].properties.id][`y_${y}`])) {\r\n            g.features[i].properties.choropleth = d[g.features[i].properties.id][`y_${y}`];\r\n            g.features[i].properties.height = d[g.features[i].properties.id][`y_${y}`] * heightFactor;\r\n        } else  {\r\n            g.features[i].properties.choropleth = 'null';\r\n            g.features[i].properties.height = 'null';\r\n        }\r\n    }\r\n    return g;\r\n}\r\n\r\nexport default geojsonDataMerge;\r\n"]}]}