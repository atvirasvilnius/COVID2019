{"remainingRequest":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\components\\map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\components\\map.vue","mtime":1582125739877},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXFVzZXJzXFx5ei5saXVcXERlc2t0b3BcXEV4cGVyaW1lbnRcXENPVklEMjAxOVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6XFxVc2Vyc1xceXoubGl1XFxEZXNrdG9wXFxFeHBlcmltZW50XFxDT1ZJRDIwMTlcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOlxcVXNlcnNcXHl6LmxpdVxcRGVza3RvcFxcRXhwZXJpbWVudFxcQ09WSUQyMDE5XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX3dhdGNoOwoKLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCc7CmltcG9ydCBnZW9qc29uRGF0YU1lcmdlIGZyb20gJy4uL2pzL2dlb2pzb25kYXRhbWVyZ2UnOwppbXBvcnQgeyBwcmV0dHlOdW1iZXIgfSBmcm9tICcuLi9qcy9udW1iZXJfZm9ybWF0JzsKaW1wb3J0IGdldFVSTFBhcmFtZXRlciBmcm9tICcuLi9qcy9nZXR1cmxwYXJhbXMnOwppbXBvcnQgeyBzY2FsZUxpbmVhciB9IGZyb20gJ2QzLXNjYWxlJzsKaW1wb3J0IGdlb2cgZnJvbSAnLi4vLi4vZGF0YS9nZW9ncmFwaHkuZ2VvanNvbi5qc29uJzsKaW1wb3J0IHZpcm91c2dlb2cgZnJvbSAnLi4vLi4vZGF0YS9jb25maWcvQ09WSUQuZ2VvanNvbi5qc29uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzYy1tYXAnLAogIHdhdGNoOiAoX3dhdGNoID0gewogICAgJ3NoYXJlZFN0YXRlLnNlbGVjdGVkJzogJ3NlbGVjdE5laWdoYm9yaG9vZHMnLAogICAgJ3NoYXJlZFN0YXRlLnllYXInOiAndXBkYXRlWWVhcicKICB9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAic2hhcmVkU3RhdGUuc2VsZWN0ZWQiLCAnc3R5bGVOZWlnaGJvcmhvb2RzJyksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICdzaGFyZWRTdGF0ZS5oaWdobGlnaHQnLCAnc3R5bGVOZWlnaGJvcmhvb2RzJyksIF93YXRjaCksCiAgbWV0aG9kczogewogICAgaW5pdE1hcDogZnVuY3Rpb24gaW5pdE1hcCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLnByaXZhdGVTdGF0ZS5tYXAgPSBuZXcgbWFwYm94Z2wuTWFwKF90aGlzLnByaXZhdGVTdGF0ZS5tYXBPcHRpb25zKTsKICAgICAgdmFyIG1hcCA9IF90aGlzLnByaXZhdGVTdGF0ZS5tYXA7IC8vIGFkZCBuYXYgY29udHJvbAoKICAgICAgdmFyIG5hdiA9IG5ldyBtYXBib3hnbC5OYXZpZ2F0aW9uQ29udHJvbCgpOwogICAgICBtYXAuYWRkQ29udHJvbChuYXYsICd0b3AtcmlnaHQnKTsgLy8gUGl0Y2ggY29udHJvbAoKICAgICAgdmFyIFBpdGNoQ29udHJvbCA9CiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIFBpdGNoQ29udHJvbCgpIHsKICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQaXRjaENvbnRyb2wpOwoKICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAib25QaXRjaCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHBpdGNoID0gX3RoaXMyLl9tYXAuZ2V0UGl0Y2goKTsKCiAgICAgICAgICAgIHZhciBpczNETW9kZSA9IHBpdGNoID4gNTsKCiAgICAgICAgICAgIF90aGlzMi5fY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGlzM0RNb2RlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX2NyZWF0ZUNsYXNzKFBpdGNoQ29udHJvbCwgW3sKICAgICAgICAgIGtleTogIm9uQWRkIiwKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkFkZChtYXApIHsKICAgICAgICAgICAgdGhpcy5fbWFwID0gbWFwOwogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnbWFwYm94Z2wtY3RybCBtYXBib3hnbC1jdHJsLWdyb3VwJzsKICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8YnV0dG9uIGNsYXNzPSJtYXBib3hnbC1jdHJsLWljb24gbWFwYm94Z2wtY3RybC1jdXN0b20tcGl0Y2giIHR5cGU9ImJ1dHRvbiI+PHNwYW4+M0Q8L3NwYW4+PC9idXR0b24+JzsKCiAgICAgICAgICAgIGNvbnRhaW5lci5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBwaXRjaCA9IG1hcC5nZXRQaXRjaCgpOwogICAgICAgICAgICAgIHZhciB6b29tID0gbWFwLmdldFpvb20oKTsKICAgICAgICAgICAgICB2YXIgbmV4dFBpdGNoID0gMDsKICAgICAgICAgICAgICBpZiAocGl0Y2ggPD0gNSkgbmV4dFBpdGNoID0gMzA7CgogICAgICAgICAgICAgIGlmICh6b29tIDwgMTAgJiYgcGl0Y2ggPCA1KSB7CiAgICAgICAgICAgICAgICBtYXAuZmx5VG8oewogICAgICAgICAgICAgICAgICBwaXRjaDogbmV4dFBpdGNoIC8vem9vbTogOCwKCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWFwLmVhc2VUbyh7CiAgICAgICAgICAgICAgICAgIHBpdGNoOiBuZXh0UGl0Y2gKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1hcC5vbigncGl0Y2hlbmQnLCB0aGlzLm9uUGl0Y2gpOwogICAgICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAib25SZW1vdmUiLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkgewogICAgICAgICAgICB0aGlzLl9jb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9jb250YWluZXIpOwoKICAgICAgICAgICAgdGhpcy5fbWFwLm9mZigncGl0Y2hlbmQnLCB0aGlzLm9uUGl0Y2gpOwoKICAgICAgICAgICAgdGhpcy5fbWFwID0gdW5kZWZpbmVkOwogICAgICAgICAgfQogICAgICAgIH1dKTsKCiAgICAgICAgcmV0dXJuIFBpdGNoQ29udHJvbDsKICAgICAgfSgpOwoKICAgICAgOwogICAgICBtYXAuYWRkQ29udHJvbChuZXcgUGl0Y2hDb250cm9sKCksICd0b3AtcmlnaHQnKTsgLy8gZGlzYWJsZSBtYXAgcm90YXRpb24gdXNpbmcgcmlnaHQgY2xpY2sgKyBkcmFnIGFuZCB0b3VjaAoKICAgICAgaWYgKF90aGlzLnByaXZhdGVTdGF0ZS5waXRjaCA9PT0gZmFsc2UpIHsKICAgICAgICAvL21hcC5kcmFnUm90YXRlLmRpc2FibGUoKTsKICAgICAgICBtYXAudG91Y2hab29tUm90YXRlLmRpc2FibGVSb3RhdGlvbigpOwogICAgICB9IC8vIGFmdGVyIG1hcCBpbml0aWF0ZWQsIGdyYWIgZ2VvZ3JhcGh5IGFuZCBpbnRpYXRlL3N0eWxlIG5laWdoYm9yaG9vZHMKCgogICAgICBtYXAub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMucHJpdmF0ZVN0YXRlLm1hcExvYWRlZCA9IHRydWU7CiAgICAgICAgX3RoaXMucHJpdmF0ZVN0YXRlLmdlb0pTT04gPSBnZW9nOwoKICAgICAgICBfdGhpcy5pbml0TmVpZ2hib3Job29kcygpOwoKICAgICAgICBfdGhpcy5zdHlsZU5laWdoYm9yaG9vZHMoKTsKCiAgICAgICAgX3RoaXMuaW5pdE1hcEV2ZW50cygpOwoKICAgICAgICBpZiAoX3RoaXMuc2hhcmVkU3RhdGUuc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgICAgICAgX3RoaXMuem9vbU5laWdoYm9yaG9vZHMoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRNYXBFdmVudHM6IGZ1bmN0aW9uIGluaXRNYXBFdmVudHMoKSB7CiAgICAgIHZhciBtYXAgPSB0aGlzLnByaXZhdGVTdGF0ZS5tYXA7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHBvcHVwID0gbmV3IG1hcGJveGdsLlBvcHVwKHsKICAgICAgICBjbG9zZUJ1dHRvbjogZmFsc2UsCiAgICAgICAgY2xvc2VPbkNsaWNrOiBmYWxzZQogICAgICB9KTsKICAgICAgbWFwLm9uKCdtb3VzZW1vdmUnLCAnbmVpZ2hib3Job29kcy1maWxsLWV4dHJ1ZGUnLCBmdW5jdGlvbiAoZSkgewogICAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7CiAgICAgICAgdmFyIGZlYXR1cmUgPSBlLmZlYXR1cmVzWzBdOwogICAgICAgIHBvcHVwLnNldExuZ0xhdChtYXAudW5wcm9qZWN0KGUucG9pbnQpKS5zZXRIVE1MKCI8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7XCI+XG5cdFx0XHRVcmJhbiBab25lOiAiLmNvbmNhdChmZWF0dXJlLnByb3BlcnRpZXMuU1VCWk9ORV9OLCAiPC9kaXY+XHRcdFx0XG5cdFx0XHQ8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7XCI+IFBsYW4gQXJlYTogIikuY29uY2F0KGZlYXR1cmUucHJvcGVydGllcy5QTE5fQVJFQV9OLCAiPC9kaXY+XG5cdFx0XHQ8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7XCI+IFBvcHVsYXRpb246ICIpLmNvbmNhdChmZWF0dXJlLnByb3BlcnRpZXMuVE9UQUwsICI8L2Rpdj4iKSkuYWRkVG8obWFwKTsKICAgICAgfSk7CiAgICAgIG1hcC5vbignbW91c2VsZWF2ZScsICduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJyc7CiAgICAgICAgcG9wdXAucmVtb3ZlKCk7CiAgICAgIH0pOwogICAgICBtYXAub24oJ3JvdGF0ZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKG1hcC5nZXRQaXRjaCgpID49IDIwKSB7CiAgICAgICAgICBfdGhpcy50b2dnbGUzRCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy50b2dnbGUzRCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlM0Q6IGZ1bmN0aW9uIHRvZ2dsZTNEKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1hcCA9IF90aGlzLnByaXZhdGVTdGF0ZS5tYXA7CiAgICAgIHZhciBwaXRjaGVkOwogICAgICBtYXAuZ2V0UGl0Y2goKSA+PSAyMCA/IHBpdGNoZWQgPSB0cnVlIDogcGl0Y2hlZCA9IGZhbHNlOwoKICAgICAgaWYgKHBpdGNoZWQpIHsKICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ25laWdoYm9yaG9vZHMnLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgICAgbWFwLm1vdmVMYXllcignbmVpZ2hib3Job29kcy1maWxsLWV4dHJ1ZGUnKTsKICAgICAgICBtYXAuc2V0UGFpbnRQcm9wZXJ0eSgnbmVpZ2hib3Job29kcy1maWxsLWV4dHJ1ZGUnLCAnZmlsbC1leHRydXNpb24taGVpZ2h0JywgX3RoaXMuZ2V0SGVpZ2h0KCkpOwogICAgICB9IGVsc2UgewogICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnbmVpZ2hib3Job29kcycsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgICAgICBtYXAubW92ZUxheWVyKCduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScsICdidWlsZGluZycpOwogICAgICAgIG1hcC5zZXRQYWludFByb3BlcnR5KCduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScsICdmaWxsLWV4dHJ1c2lvbi1oZWlnaHQnLCAwKTsKICAgICAgfQogICAgfSwKICAgIGluaXROZWlnaGJvcmhvb2RzOiBmdW5jdGlvbiBpbml0TmVpZ2hib3Job29kcygpIHsKICAgICAgdmFyIG1hcCA9IHRoaXMucHJpdmF0ZVN0YXRlLm1hcDsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZ2VvSlNPTiA9IF90aGlzLnByaXZhdGVTdGF0ZS5nZW9KU09OOwogICAgICBtYXAuYWRkU291cmNlKCduZWlnaGJvcmhvb2RzJywgewogICAgICAgIHR5cGU6ICdnZW9qc29uJywKICAgICAgICBkYXRhOiBnZW9KU09OCiAgICAgIH0pOyAvLyBuZWlnaGJvcmhvb2QgYm91bmRhcmllcwoKICAgICAgbWFwLmFkZExheWVyKHsKICAgICAgICBpZDogJ25laWdoYm9yaG9vZHMnLAogICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICBzb3VyY2U6ICduZWlnaGJvcmhvb2RzJywKICAgICAgICBsYXlvdXQ6IHt9LAogICAgICAgIHBhaW50OiB7fQogICAgICB9LCAncGxhY2Vfb3RoZXInKTsKICAgICAgbWFwLmFkZExheWVyKHsKICAgICAgICBpZDogJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJywKICAgICAgICB0eXBlOiAnZmlsbC1leHRydXNpb24nLAogICAgICAgIHNvdXJjZTogJ25laWdoYm9yaG9vZHMnLAogICAgICAgIC8vJ2ZpbHRlcic6IFsnIT0nLCAnY2hvcm9wbGV0aCcsICdudWxsJ10sCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICdmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5JzogMC43CiAgICAgICAgfQogICAgICB9LCAnYnVpbGRpbmcnKTsgLy8gbWFya2VycyBsYXllcgoKICAgICAgbWFwLmFkZFNvdXJjZSgnbWFya2VycycsIHsKICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgZGF0YTogdmlyb3VzZ2VvZwogICAgICB9KTsKICAgICAgbWFwLmFkZExheWVyKHsKICAgICAgICBpZDogJ21hcmtlcnMnLAogICAgICAgIHR5cGU6ICdjaXJjbGUnLAogICAgICAgIHNvdXJjZTogJ21hcmtlcnMnLAoKICAgICAgICAvKiBsYXlvdXQ6IHsNCiAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdjaXJjbGUtMTEnLA0KICAgICAgICAgICdpY29uLXNpemUnOiAxLjAsDQogICAgICAgICAgICAgIH0gKi8KICAgICAgICBwYWludDogewogICAgICAgICAgJ2NpcmNsZS1yYWRpdXMnOiAxMCwKICAgICAgICAgICdjaXJjbGUtY29sb3InOiAnI2ZmMDAwMCcKICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXAuc2V0UGl0Y2goMzApOwogICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ25laWdoYm9yaG9vZHMnLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgIG1hcC5tb3ZlTGF5ZXIoJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJyk7CiAgICAgIG1hcC5zZXRQYWludFByb3BlcnR5KCduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScsICdmaWxsLWV4dHJ1c2lvbi1oZWlnaHQnLCBfdGhpcy5nZXRIZWlnaHQoKSk7CiAgICB9LAogICAgc2VsZWN0TmVpZ2hib3Job29kczogZnVuY3Rpb24gc2VsZWN0TmVpZ2hib3Job29kcygpIHsKICAgICAgaWYgKHRoaXMucHJpdmF0ZVN0YXRlLm1hcExvYWRlZCA9PT0gdHJ1ZSkgewogICAgICAgIHZhciBtYXAgPSB0aGlzLnByaXZhdGVTdGF0ZS5tYXA7CiAgICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5zaGFyZWRTdGF0ZS5zZWxlY3RlZDsKICAgICAgICB2YXIgZmlsdGVyOwoKICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgICAgICAgZmlsdGVyID0gWydpbicsICdpZCddOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZmlsdGVyLnB1c2goc2VsZWN0ZWRbaV0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaWx0ZXIgPSBbJ2luJywgJ2lkJywgJy05OTk5OTknXTsKICAgICAgICB9IC8vIHB1c2ggc2VsZWN0ZWQgc3RhdGUKCgogICAgICAgIHZhciBsaW5rTWV0cmljID0gJyc7CgogICAgICAgIGlmIChnZXRVUkxQYXJhbWV0ZXIoJ20nKSkgewogICAgICAgICAgbGlua01ldHJpYyA9IGdldFVSTFBhcmFtZXRlcignbScpOwogICAgICAgIH0KCiAgICAgICAgbWFwLnNldEZpbHRlcignbmVpZ2hib3Job29kcy1saW5lLXNlbGVjdGVkJywgZmlsdGVyKTsKICAgICAgICBtYXAuc2V0RmlsdGVyKCduZWlnaGJvcmhvb2RzLWZpbGwtc2VsZWN0ZWQnLCBmaWx0ZXIpOwogICAgICB9CiAgICB9LAogICAgc3R5bGVOZWlnaGJvcmhvb2RzOiBmdW5jdGlvbiBzdHlsZU5laWdoYm9yaG9vZHMoKSB7CiAgICAgIHZhciBtYXAgPSB0aGlzLnByaXZhdGVTdGF0ZS5tYXA7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgbWFwLnNldFBhaW50UHJvcGVydHkoJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJywgJ2ZpbGwtZXh0cnVzaW9uLWNvbG9yJywgX3RoaXMuZ2V0Q29sb3JzKCkpOwogICAgICBtYXAuc2V0UGFpbnRQcm9wZXJ0eSgnbmVpZ2hib3Job29kcycsICdsaW5lLWNvbG9yJywgX3RoaXMuZ2V0T3V0bGluZUNvbG9yKCkpOwogICAgICBtYXAuc2V0UGFpbnRQcm9wZXJ0eSgnbmVpZ2hib3Job29kcycsICdsaW5lLXdpZHRoJywgX3RoaXMuZ2V0T3V0bGluZVdpZHRoKCkpOwoKICAgICAgaWYgKF90aGlzLnByaXZhdGVTdGF0ZS5pc1BpdGNoZWQzRCkgewogICAgICAgIG1hcC5zZXRQYWludFByb3BlcnR5KCduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScsICdmaWxsLWV4dHJ1c2lvbi1oZWlnaHQnLCBfdGhpcy5nZXRIZWlnaHQoKSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVDaG9yb3BsZXRoOiBmdW5jdGlvbiB1cGRhdGVDaG9yb3BsZXRoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucHJpdmF0ZVN0YXRlLm1hcExvYWRlZCkgewogICAgICAgIHRoaXMuc3R5bGVOZWlnaGJvcmhvb2RzKCk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVCcmVha3M6IGZ1bmN0aW9uIHVwZGF0ZUJyZWFrcygpIHsKICAgICAgdGhpcy5wcml2YXRlU3RhdGUubWV0cmljSWQgPSB0aGlzLnNoYXJlZFN0YXRlLm1ldHJpY0lkOwogICAgICB0aGlzLnVwZGF0ZUNob3JvcGxldGgoKTsKICAgIH0sCiAgICB1cGRhdGVZZWFyOiBmdW5jdGlvbiB1cGRhdGVZZWFyKCkgewogICAgICBpZiAodGhpcy5zaGFyZWRTdGF0ZS5tZXRyaWNJZCA9PT0gdGhpcy5wcml2YXRlU3RhdGUubWV0cmljSWQpIHsKICAgICAgICB0aGlzLnVwZGF0ZUNob3JvcGxldGgoKTsKICAgICAgfQogICAgfSwKICAgIGdlb0pTT05NZXJnZTogZnVuY3Rpb24gZ2VvSlNPTk1lcmdlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGdlb09iaiA9IGdlb2pzb25EYXRhTWVyZ2UoX3RoaXMucHJpdmF0ZVN0YXRlLmdlb0pTT04sIF90aGlzLnNoYXJlZFN0YXRlLm1ldHJpYy5kYXRhLm1hcCwgX3RoaXMuc2hhcmVkU3RhdGUueWVhcik7CiAgICAgIHJldHVybiBnZW9PYmo7CiAgICB9LAogICAgZ2V0RnVsbEJvdW5kczogZnVuY3Rpb24gZ2V0RnVsbEJvdW5kcygpIHsKICAgICAgdmFyIGJvdW5kcyA9IG5ldyBtYXBib3hnbC5MbmdMYXRCb3VuZHMoKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnByaXZhdGVTdGF0ZS5nZW9KU09OLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHsKICAgICAgICBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzLmZvckVhY2goZnVuY3Rpb24gKGNvb3JkKSB7CiAgICAgICAgICBjb29yZC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICBib3VuZHMuZXh0ZW5kKGVsKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIGJvdW5kczsKICAgIH0sCiAgICB6b29tTmVpZ2hib3Job29kczogZnVuY3Rpb24gem9vbU5laWdoYm9yaG9vZHMoKSB7CiAgICAgIHZhciBib3VuZHMgPSBuZXcgbWFwYm94Z2wuTG5nTGF0Qm91bmRzKCk7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5wcml2YXRlU3RhdGUuZ2VvSlNPTi5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7CiAgICAgICAgaWYgKF90aGlzLnNoYXJlZFN0YXRlLnNlbGVjdGVkLmluZGV4T2YoZmVhdHVyZS5wcm9wZXJ0aWVzLmlkKSAhPT0gLTEpIHsKICAgICAgICAgIGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoY29vcmQpIHsKICAgICAgICAgICAgY29vcmQuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICBib3VuZHMuZXh0ZW5kKGVsKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnByaXZhdGVTdGF0ZS5tYXAuZml0Qm91bmRzKGJvdW5kcywgewogICAgICAgIHBhZGRpbmc6IDEwMAogICAgICB9KTsKICAgIH0sCiAgICBnZXRPdXRsaW5lQ29sb3I6IGZ1bmN0aW9uIGdldE91dGxpbmVDb2xvcigpIHsKICAgICAgdmFyIHN0b3BzID0gW107CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuc2hhcmVkU3RhdGUuc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHsKICAgICAgICBzdG9wcy5wdXNoKFtpZCwgJyNiYTAwZTQnXSk7CiAgICAgIH0pOwoKICAgICAgdmFyIG91dGxpbmUgPSB7CiAgICAgICAgcHJvcGVydHk6ICdPQkpFQ1RJRCcsCiAgICAgICAgImRlZmF1bHQiOiAncmdiYSgwLDAsMCwxKScsCiAgICAgICAgdHlwZTogJ2NhdGVnb3JpY2FsJywKICAgICAgICBzdG9wczogc3RvcHMKICAgICAgfTsKCiAgICAgIGlmIChzdG9wcy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIG91dGxpbmU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG91dGxpbmVbImRlZmF1bHQiXTsKICAgICAgfQogICAgfSwKICAgIGdldE91dGxpbmVXaWR0aDogZnVuY3Rpb24gZ2V0T3V0bGluZVdpZHRoKCkgewogICAgICB2YXIgc3RvcHMgPSBbXTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5zaGFyZWRTdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uIChpZCkgewogICAgICAgIHN0b3BzLnB1c2goW2lkLCA0XSk7CiAgICAgIH0pOwoKICAgICAgdmFyIG91dGxpbmVTaXplID0gewogICAgICAgIHByb3BlcnR5OiAnT0JKRUNUSUQnLAogICAgICAgICJkZWZhdWx0IjogMC40LAogICAgICAgIHR5cGU6ICdjYXRlZ29yaWNhbCcsCiAgICAgICAgc3RvcHM6IHN0b3BzCiAgICAgIH07CgogICAgICBpZiAoc3RvcHMubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBvdXRsaW5lU2l6ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gb3V0bGluZVNpemVbImRlZmF1bHQiXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0b3BzOwogICAgfSwKICAgIGdldENvbG9yczogZnVuY3Rpb24gZ2V0Q29sb3JzKCkgewogICAgICB2YXIgc3RvcHMgPSBbXTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZmVhdHVyZSA9IF90aGlzLnByaXZhdGVTdGF0ZS5nZW9KU09OLmZlYXR1cmVzOwogICAgICB2YXIgaWQgPSAxOwogICAgICB2YXIgZGF0YSA9IGZlYXR1cmU7CiAgICAgIHZhciBicmVha3MgPSBbMzEyNSwgNjI1MCwgMTI1MDAsIDI1MDAwLCA1MDAwMCwgMjAwMDAwXTsKICAgICAgX3RoaXMuc2hhcmVkU3RhdGUuYnJlYWtzID0gYnJlYWtzOwogICAgICB2YXIgY29sb3JzID0gdGhpcy5zaGFyZWRTdGF0ZS5jb2xvcnM7CgogICAgICB2YXIgY29sb3IgPSBmdW5jdGlvbiBjb2xvcih2YWwpIHsKICAgICAgICBpZiAodmFsIDw9IGJyZWFrc1sxXSkgewogICAgICAgICAgcmV0dXJuIGNvbG9yc1swXTsKICAgICAgICB9IGVsc2UgaWYgKHZhbCA8PSBicmVha3NbMl0pIHsKICAgICAgICAgIHJldHVybiBjb2xvcnNbMV07CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPD0gYnJlYWtzWzNdKSB7CiAgICAgICAgICByZXR1cm4gY29sb3JzWzJdOwogICAgICAgIH0gZWxzZSBpZiAodmFsIDw9IGJyZWFrc1s0XSkgewogICAgICAgICAgcmV0dXJuIGNvbG9yc1szXTsKICAgICAgICB9IGVsc2UgaWYgKHZhbCA8PSBicmVha3NbNV0pIHsKICAgICAgICAgIHJldHVybiBjb2xvcnNbNF07CiAgICAgICAgfQogICAgICB9OwoKICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHsKICAgICAgICB2YXIgdmFsdWUgPSBfdGhpcy5zaGFyZWRTdGF0ZS5oaWdobGlnaHQubGVuZ3RoOwoKICAgICAgICBpZiAodmFsdWUgIT09IDAgJiYgaWQgPCB2YWx1ZSkgewogICAgICAgICAgc3RvcHMucHVzaChbTnVtYmVyKF90aGlzLnNoYXJlZFN0YXRlLmhpZ2hsaWdodFtpZF0pLCAnI0Y3RTU1QiddKTsKICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDApIHsKICAgICAgICAgIHN0b3BzLnB1c2goW2RhdGFbaWRdLnByb3BlcnRpZXMuT0JKRUNUSUQsIGNvbG9yKGRhdGFbaWRdLnByb3BlcnRpZXMuVE9UQUwpXSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIGZpbGxDb2xvciA9IHsKICAgICAgICBwcm9wZXJ0eTogJ09CSkVDVElEJywKICAgICAgICAiZGVmYXVsdCI6ICdyZ2IoMjQyLDI0MywyNDApJywKICAgICAgICB0eXBlOiAnY2F0ZWdvcmljYWwnLAogICAgICAgIHN0b3BzOiBzdG9wcwogICAgICB9OwogICAgICByZXR1cm4gZmlsbENvbG9yOwogICAgfSwKICAgIGdldEhlaWdodDogZnVuY3Rpb24gZ2V0SGVpZ2h0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN0b3BzID0gW107CiAgICAgIHZhciBmZWF0dXJlID0gX3RoaXMucHJpdmF0ZVN0YXRlLmdlb0pTT04uZmVhdHVyZXM7CiAgICAgIHZhciBpZCA9IDE7CiAgICAgIHZhciBkYXRhID0gZmVhdHVyZTsKICAgICAgdmFyIGhicmVha3MgPSBbMzEyNSwgNjI1MCwgMTI1MDAsIDI1MDAwLCA1MDAwMCwgMjAwMDAwXTsKICAgICAgX3RoaXMuc2hhcmVkU3RhdGUuYnJlYWtzID0gaGJyZWFrczsKICAgICAgdmFyIGhlaWdodEFkanVzdCA9IHNjYWxlTGluZWFyKCkuZG9tYWluKFtoYnJlYWtzLCBoYnJlYWtzW2hicmVha3MubGVuZ3RoIC0gMV1dKS5yYW5nZShbMCwgMjAwMDAwXSk7CiAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtpZF0ucHJvcGVydGllcy5UT1RBTDsKCiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgICBzdG9wcy5wdXNoKFtkYXRhW2lkXS5wcm9wZXJ0aWVzLk9CSkVDVElELCB2YWx1ZSAvIDEwMF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBoZWlnaHQgPSB7CiAgICAgICAgcHJvcGVydHk6ICdPQkpFQ1RJRCcsCiAgICAgICAgImRlZmF1bHQiOiAwLAogICAgICAgIHR5cGU6ICdjYXRlZ29yaWNhbCcsCiAgICAgICAgc3RvcHM6IHN0b3BzCiAgICAgIH07CiAgICAgIHJldHVybiBoZWlnaHQ7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0TWFwKCk7CiAgfQp9Ow=="},{"version":3,"sources":["map.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"\" style=\"position: relative; width: 100%; height: 100%\">\r\n    <div id=\"map\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mapboxgl from 'mapbox-gl';\r\nimport geojsonDataMerge from '../js/geojsondatamerge';\r\nimport {\r\n  prettyNumber\r\n} from '../js/number_format';\r\nimport getURLParameter from '../js/geturlparams';\r\nimport {\r\n  scaleLinear\r\n} from 'd3-scale';\r\nimport geog from '../../data/geography.geojson.json';\r\nimport virousgeog from '../../data/config/COVID.geojson.json';\r\n\r\nexport default {\r\n  name: 'sc-map',\r\n  watch: {\r\n    'sharedState.selected': 'selectNeighborhoods',\r\n    \r\n    'sharedState.year': 'updateYear',\r\n    'sharedState.selected': 'styleNeighborhoods',\r\n    'sharedState.highlight': 'styleNeighborhoods'\r\n  },\r\n  methods: {\r\n    initMap: function () {\r\n      let _this = this;\r\n      _this.privateState.map = new mapboxgl.Map(_this.privateState.mapOptions);\r\n\r\n      let map = _this.privateState.map;\r\n\t\t \r\n      // add nav control\r\n      var nav = new mapboxgl.NavigationControl();\r\n      map.addControl(nav, 'top-right');\r\n\r\n\t  // Pitch control\r\n    class PitchControl {\r\n      onAdd(map) {\r\n        this._map = map;\r\n        const container = document.createElement('div');\r\n        container.className = 'mapboxgl-ctrl mapboxgl-ctrl-group';\r\n        container.innerHTML = '<button class=\"mapboxgl-ctrl-icon mapboxgl-ctrl-custom-pitch\" type=\"button\"><span>3D</span></button>';\r\n        container.onclick = function(){\r\n          const pitch = map.getPitch();\r\n          const zoom = map.getZoom();\r\n          let nextPitch = 0;\r\n          if (pitch <= 5) nextPitch = 30;\r\n          if (zoom < 10 && pitch < 5) {\r\n            map.flyTo({\r\n              pitch: nextPitch,\r\n              //zoom: 8,\r\n            });\r\n          } else {\r\n            map.easeTo({\r\n              pitch: nextPitch\r\n            });\r\n          }\r\n        };\r\n        map.on('pitchend', this.onPitch);\r\n        this._container = container;\r\n        return this._container;\r\n      }\r\n      onPitch = () => {\r\n        const pitch = this._map.getPitch();\r\n        const is3DMode = pitch > 5;\r\n        this._container.classList.toggle('active', is3DMode);\r\n      }\r\n      onRemove() {\r\n        this._container.parentNode.removeChild(this._container);\r\n        this._map.off('pitchend', this.onPitch);\r\n        this._map = undefined;\r\n      }\r\n    };\r\n    map.addControl(new PitchControl(), 'top-right');\r\n\t  \r\n      // disable map rotation using right click + drag and touch\r\n      if (_this.privateState.pitch === false) {\r\n        //map.dragRotate.disable();\r\n        map.touchZoomRotate.disableRotation();\r\n      }\r\n\r\n      // after map initiated, grab geography and intiate/style neighborhoods\r\n      map.on('load', function () {\r\n        _this.privateState.mapLoaded = true;\r\n        _this.privateState.geoJSON = geog;\r\n        _this.initNeighborhoods();\r\n        _this.styleNeighborhoods();\r\n        _this.initMapEvents();\r\n\r\n        if (_this.sharedState.selected.length > 0) {\r\n          _this.zoomNeighborhoods();\r\n        }\r\n      });\r\n\r\n    },\r\n    initMapEvents: function () {\r\n      let map = this.privateState.map;\r\n      let _this = this;\r\n      let popup = new mapboxgl.Popup({\r\n        closeButton: false,\r\n        closeOnClick: false\r\n      });\r\n\r\n      map.on('mousemove', 'neighborhoods-fill-extrude', function (e) {\r\n        map.getCanvas().style.cursor = 'pointer';\r\n        let feature = e.features[0];\r\n        \r\n        popup\r\n          .setLngLat(map.unproject(e.point))\r\n          .setHTML(\r\n            `<div style=\"text-align: center; margin: 0; padding: 0;\">\r\n\t\t\tUrban Zone: ${feature.properties.SUBZONE_N}</div>\t\t\t\r\n\t\t\t<div style=\"text-align: center; margin: 0; padding: 0;\"> Plan Area: ${feature.properties.PLN_AREA_N}</div>\r\n\t\t\t<div style=\"text-align: center; margin: 0; padding: 0;\"> Population: ${feature.properties.TOTAL}</div>`\r\n          )\r\n          .addTo(map);\r\n      });\r\n\r\n      map.on('mouseleave', 'neighborhoods-fill-extrude', function () {\r\n        map.getCanvas().style.cursor = '';\r\n        popup.remove();\r\n      });\r\n\r\n      map.on('rotate', function (e) {\r\n        if (map.getPitch() >= 20) {\r\n          _this.toggle3D();\r\n        } else {\r\n          _this.toggle3D();\r\n        }\r\n      });\r\n    },\r\n    toggle3D: function () {\r\n      let _this = this;\r\n      let map = _this.privateState.map;\r\n      let pitched;\r\n\r\n      map.getPitch() >= 20 ? (pitched = true) : (pitched = false);\r\n\r\n      if (pitched) {\r\n        map.setLayoutProperty('neighborhoods', 'visibility', 'none');\r\n        map.moveLayer('neighborhoods-fill-extrude');\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          _this.getHeight()\r\n        );\r\n      } else {\r\n        map.setLayoutProperty('neighborhoods', 'visibility', 'visible');\r\n        map.moveLayer('neighborhoods-fill-extrude', 'building');\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          0\r\n        );\r\n      }\r\n    },\r\n    initNeighborhoods: function () {\r\n      let map = this.privateState.map;\r\n      let _this = this;\r\n      let geoJSON = _this.privateState.geoJSON;\r\n\r\n      map.addSource('neighborhoods', {\r\n        type: 'geojson',\r\n        data: geoJSON\r\n      });\r\n\r\n      // neighborhood boundaries\r\n      map.addLayer({\r\n          id: 'neighborhoods',\r\n          type: 'line',\r\n          source: 'neighborhoods',\r\n          layout: {},\r\n          paint: {}\r\n        },\r\n        'place_other'\r\n      );\r\n\r\n      map.addLayer({\r\n          id: 'neighborhoods-fill-extrude',\r\n          type: 'fill-extrusion',\r\n          source: 'neighborhoods',\r\n          //'filter': ['!=', 'choropleth', 'null'],\r\n          paint: {\r\n            'fill-extrusion-opacity': 0.7\r\n          }\r\n        },\r\n        'building'\r\n      );\r\n\t  \r\n      // markers layer\r\n      map.addSource('markers', {\r\n        type: 'geojson',\r\n        data: virousgeog\r\n      });\r\n      map.addLayer({\r\n        id: 'markers',\r\n        type: 'circle',\r\n        source: 'markers',\r\n        /* layout: {\r\n          'icon-image': 'circle-11',\r\n          'icon-size': 1.0,\r\n\t\t  \r\n        } */\r\n\t\tpaint: {\r\n\t\t'circle-radius': 10,\r\n\t\t'circle-color': '#ff0000'\r\n\t\t}\r\n      });\r\n\t  \r\n\r\n\t  \tmap.setPitch(30)\r\n\t\tmap.setLayoutProperty('neighborhoods', 'visibility', 'none');\r\n        map.moveLayer('neighborhoods-fill-extrude');\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          _this.getHeight()\r\n        );\r\n    },\r\n    selectNeighborhoods: function () {\r\n      if (this.privateState.mapLoaded === true) {\r\n        let map = this.privateState.map;\r\n        let selected = this.sharedState.selected;\r\n        let filter;\r\n\r\n        if (selected.length > 0) {\r\n          filter = ['in', 'id'];\r\n          for (let i = 0; i < selected.length; i++) {\r\n            filter.push(selected[i]);\r\n          }\r\n        } else {\r\n          filter = ['in', 'id', '-999999'];\r\n        }\r\n\r\n        // push selected state\r\n        let linkMetric = '';\r\n        if (getURLParameter('m')) {\r\n          linkMetric = getURLParameter('m');\r\n        }\r\n\r\n        map.setFilter('neighborhoods-line-selected', filter);\r\n        map.setFilter('neighborhoods-fill-selected', filter);\r\n      }\r\n    },\r\n    styleNeighborhoods: function () {\r\n      let map = this.privateState.map;\r\n      let _this = this;\r\n\r\n      map.setPaintProperty(\r\n        'neighborhoods-fill-extrude',\r\n        'fill-extrusion-color',\r\n        _this.getColors()\r\n      );\r\n      map.setPaintProperty(\r\n        'neighborhoods',\r\n        'line-color',\r\n        _this.getOutlineColor()\r\n      );\r\n      map.setPaintProperty(\r\n        'neighborhoods',\r\n        'line-width',\r\n        _this.getOutlineWidth()\r\n      );\r\n\t  \r\n      if (_this.privateState.isPitched3D) {\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          _this.getHeight()\r\n        );\r\n      }\r\n    },\r\n    updateChoropleth: function () {\r\n      let _this = this;\r\n      if (this.privateState.mapLoaded) {\r\n        this.styleNeighborhoods();\r\n      }\r\n    },\r\n    updateBreaks: function () {\r\n      this.privateState.metricId = this.sharedState.metricId;\r\n      this.updateChoropleth();\r\n    },\r\n    updateYear: function () {\r\n      if (this.sharedState.metricId === this.privateState.metricId) {\r\n        this.updateChoropleth();\r\n      }\r\n    },\r\n    geoJSONMerge: function () {\r\n      let _this = this;\r\n      let geoObj = geojsonDataMerge(\r\n        _this.privateState.geoJSON,\r\n        _this.sharedState.metric.data.map,\r\n        _this.sharedState.year\r\n      );\r\n      return geoObj;\r\n    },\r\n    getFullBounds: function () {\r\n      let bounds = new mapboxgl.LngLatBounds();\r\n      let _this = this;\r\n\r\n      this.privateState.geoJSON.features.forEach(function (feature) {\r\n        feature.geometry.coordinates.forEach(function (coord) {\r\n          coord.forEach(function (el) {\r\n            bounds.extend(el);\r\n          });\r\n        });\r\n      });\r\n\r\n      return bounds;\r\n    },\r\n    zoomNeighborhoods: function () {\r\n      let bounds = new mapboxgl.LngLatBounds();\r\n      let _this = this;\r\n\r\n      this.privateState.geoJSON.features.forEach(function (feature) {\r\n        if (_this.sharedState.selected.indexOf(feature.properties.id) !== -1) {\r\n          feature.geometry.coordinates.forEach(function (coord) {\r\n            coord.forEach(function (el) {\r\n              bounds.extend(el);\r\n            });\r\n          });\r\n        }\r\n      });\r\n\r\n      this.privateState.map.fitBounds(bounds, {\r\n        padding: 100\r\n      });\r\n    },\r\n    getOutlineColor: function () {\r\n      const stops = [];\r\n      let _this = this;\r\n\r\n      _this.sharedState.selected.forEach(id => {\r\n        stops.push([id, '#ba00e4']);\r\n      });\r\n\r\n      let outline = {\r\n        property: 'OBJECTID',\r\n        default: 'rgba(0,0,0,1)',\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      if (stops.length > 0) {\r\n        return outline;\r\n      } else {\r\n        return outline.default;\r\n      }\r\n    },\r\n    getOutlineWidth: function () {\r\n      const stops = [];\r\n      let _this = this;\r\n\r\n      _this.sharedState.selected.forEach(id => {\r\n        stops.push([id, 4]);\r\n      });\r\n\r\n      let outlineSize = {\r\n        property: 'OBJECTID',\r\n        default: 0.4,\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      if (stops.length > 0) {\r\n        return outlineSize;\r\n      } else {\r\n        return outlineSize.default;\r\n      }\r\n\r\n      return stops;\r\n    },\r\n    getColors: function () {\r\n      const stops = [];\r\n      let _this = this;\r\n\t  \r\n\t  let feature = _this.privateState.geoJSON.features;\r\n      let id = 1;  \r\n      let data = feature;\r\n\t  \r\n      let breaks = [3125,6250,12500,25000,50000,200000];\r\n\t  _this.sharedState.breaks = breaks;\r\n      let colors = this.sharedState.colors;\r\n\r\n      let color = function (val) {\r\n        if (val <= breaks[1]) {\r\n          return colors[0];\r\n        } else if (val <= breaks[2]) {\r\n          return colors[1];\r\n        } else if (val <= breaks[3]) {\r\n          return colors[2];\r\n        } else if (val <= breaks[4]) {\r\n          return colors[3];\r\n        } else if (val <= breaks[5]) {\r\n          return colors[4];\r\n        }\r\n      };\r\n\r\n    Object.keys(data).forEach(id => {\r\n             const value = _this.sharedState.highlight.length;\r\n              \r\n\t\t\t if (value !== 0 && id < value) {\t\t\t \r\n\t\t\t    \r\n\t\t\t\tstops.push([Number(_this.sharedState.highlight[id]), '#F7E55B']);\r\n\r\n             } else if (value == 0 ) {\r\n               stops.push([data[id].properties.OBJECTID, color(data[id].properties.TOTAL)]);\r\n             }\r\n\t\t\t \r\n\t\t\t \r\n           });\r\n\t\t   \r\n\t  \r\n      let fillColor = {\r\n        property: 'OBJECTID',\r\n        default: 'rgb(242,243,240)',\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      return fillColor;\r\n    },\r\n    getHeight: function () {\r\n      let _this = this;\r\n      const stops = [];\r\n      \r\n\t  let feature = _this.privateState.geoJSON.features;\r\n      let id = 1;  \r\n      let data = feature;\r\n\t  let hbreaks = [3125,6250,12500,25000,50000,200000];\r\n\t  _this.sharedState.breaks = hbreaks;\r\n      let heightAdjust = scaleLinear()\r\n        .domain([\r\n          hbreaks,\r\n          hbreaks[hbreaks.length - 1]\r\n        ])\r\n        .range([0, 200000]);\r\n\r\n      Object.keys(data).forEach(id => {\r\n        const value = data[id].properties.TOTAL;\r\n        if (value !== null) {\r\n          stops.push([data[id].properties.OBJECTID, value/100]);\r\n        }\r\n      });\r\n\t  \r\n      let height = {\r\n        property: 'OBJECTID',\r\n        default: 0,\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      return height;\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.initMap();\r\n  }\r\n};\r\n</script>"],"sourceRoot":"src/components"}]}