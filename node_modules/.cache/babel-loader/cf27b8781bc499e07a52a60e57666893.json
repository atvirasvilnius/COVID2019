{"remainingRequest":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\js\\jenksbreaks.js","dependencies":[{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\js\\jenksbreaks.js","mtime":1582990926060},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGplbmtzIGZyb20gJy4vamVua3MnOwppbXBvcnQgeyB2YWxzVG9BcnJheSB9IGZyb20gJy4vbWV0cmljX2NhbGN1bGF0aW9ucyc7IC8vIFdpdGggbW9yZSB0aGFuIGEgZmV3IHllYXJzIHdvcnRoIG9mIGRhdGEsIGplbmtzIGNhbGN1bGF0aW9ucyBjYW4gdGFrZSBhIGxvbmcgdGltZS4KLy8gU28gSSdtIGNoZWF0aW5nIGhlcmUgYSBiaXQuIEkgZG8gYSBqZW5rcyBjYWxjdWxhdGlvbiB3aXRoIGp1c3QgdGhlIGxhc3QgdHdvIHllYXJzIGlmCi8vIG1vcmUgdGhhbiAxIHllYXIgaXMgYXZhaWxhYmxlLiBUaGVuIEkgcmVwbGFjZSB0aGUgbWluIGFuZCBtYXggdmFsdWVzIGZyb20gdGhlCi8vIGZ1bGwgc2V0IHNvIG5vdGhpbmcgZmFsbHMgYmV0d2VlbiB0aGUgY3JhY2tzLgoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gamVua3NCcmVha3MoZGF0YSwgeWVhcnMsIGtleXMpIHsKICB2YXIgYnJlYWtzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiA1OwogIHZhciBqZW5rc1llYXJzID0gW3llYXJzW3llYXJzLmxlbmd0aCAtIDFdXTsKCiAgaWYgKHllYXJzLmxlbmd0aCA+IDEpIHsKICAgIGplbmtzWWVhcnMucHVzaCh5ZWFyc1t5ZWFycy5sZW5ndGggLSAyXSk7CiAgfQoKICB2YXIgYWxsVmFscyA9IHZhbHNUb0FycmF5KGRhdGEsIHllYXJzLCBrZXlzKTsKICB2YXIgamVua3NWYWxzID0gdmFsc1RvQXJyYXkoZGF0YSwgW3llYXJzW3llYXJzLmxlbmd0aCAtIDFdXSwga2V5cyk7CiAgdmFyIGplbmtzQXJyYXkgPSBqZW5rcyhqZW5rc1ZhbHMsIGJyZWFrcyk7CiAgamVua3NBcnJheVswXSA9IE1hdGgubWluLmFwcGx5KE1hdGgsIGFsbFZhbHMpOwogIGplbmtzQXJyYXlbamVua3NBcnJheS5sZW5ndGggLSAxXSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGFsbFZhbHMpOwogIHJldHVybiBqZW5rc0FycmF5Owp9"},{"version":3,"sources":["C:/Users/yz.liu/Desktop/Experiment/COVID2019/src/js/jenksbreaks.js"],"names":["jenks","valsToArray","jenksBreaks","data","years","keys","breaks","jenksYears","length","push","allVals","jenksVals","jenksArray","Math","min","apply","max"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,SAAQC,WAAR,QAA0B,uBAA1B,C,CAGA;AACA;AACA;AACA;;AAEA,eAAe,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAoD;AAAA,MAAZC,MAAY,uEAAH,CAAG;AAC/D,MAAIC,UAAU,GAAG,CAACH,KAAK,CAACA,KAAK,CAACI,MAAN,GAAe,CAAhB,CAAN,CAAjB;;AACA,MAAIJ,KAAK,CAACI,MAAN,GAAe,CAAnB,EAAsB;AAClBD,IAAAA,UAAU,CAACE,IAAX,CAAgBL,KAAK,CAACA,KAAK,CAACI,MAAN,GAAe,CAAhB,CAArB;AACH;;AAED,MAAIE,OAAO,GAAGT,WAAW,CAACE,IAAD,EAAOC,KAAP,EAAcC,IAAd,CAAzB;AACA,MAAIM,SAAS,GAAGV,WAAW,CAACE,IAAD,EAAO,CAACC,KAAK,CAACA,KAAK,CAACI,MAAN,GAAe,CAAhB,CAAN,CAAP,EAAkCH,IAAlC,CAA3B;AAEA,MAAIO,UAAU,GAAGZ,KAAK,CAACW,SAAD,EAAYL,MAAZ,CAAtB;AAEAM,EAAAA,UAAU,CAAC,CAAD,CAAV,GAAgBC,IAAI,CAACC,GAAL,CAASC,KAAT,CAAeF,IAAf,EAAqBH,OAArB,CAAhB;AACAE,EAAAA,UAAU,CAACA,UAAU,CAACJ,MAAX,GAAoB,CAArB,CAAV,GAAoCK,IAAI,CAACG,GAAL,CAASD,KAAT,CAAeF,IAAf,EAAqBH,OAArB,CAApC;AAEA,SAAOE,UAAP;AACH","sourcesContent":["import jenks from './jenks';\r\nimport {valsToArray} from './metric_calculations';\r\n\r\n\r\n// With more than a few years worth of data, jenks calculations can take a long time.\r\n// So I'm cheating here a bit. I do a jenks calculation with just the last two years if\r\n// more than 1 year is available. Then I replace the min and max values from the\r\n// full set so nothing falls between the cracks.\r\n\r\nexport default function jenksBreaks(data, years, keys, breaks = 5) {\r\n    let jenksYears = [years[years.length - 1]];\r\n    if (years.length > 1) {\r\n        jenksYears.push(years[years.length - 2]);\r\n    }\r\n\r\n    let allVals = valsToArray(data, years, keys);\r\n    let jenksVals = valsToArray(data, [years[years.length - 1]], keys);\r\n\r\n    let jenksArray = jenks(jenksVals, breaks);\r\n\r\n    jenksArray[0] = Math.min.apply(Math, allVals);\r\n    jenksArray[jenksArray.length - 1] = Math.max.apply(Math, allVals);\r\n\r\n    return jenksArray;\r\n}\r\n"]}]}