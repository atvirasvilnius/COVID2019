{"remainingRequest":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\components\\map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\components\\map.vue","mtime":1582990926047},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXFVzZXJzXFx5ei5saXVcXERlc2t0b3BcXEV4cGVyaW1lbnRcXENPVklEMjAxOVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6XFxVc2Vyc1xceXoubGl1XFxEZXNrdG9wXFxFeHBlcmltZW50XFxDT1ZJRDIwMTlcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOlxcVXNlcnNcXHl6LmxpdVxcRGVza3RvcFxcRXhwZXJpbWVudFxcQ09WSUQyMDE5XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX3dhdGNoOwoKLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCc7CmltcG9ydCBnZW9qc29uRGF0YU1lcmdlIGZyb20gJy4uL2pzL2dlb2pzb25kYXRhbWVyZ2UnOwppbXBvcnQgeyBwcmV0dHlOdW1iZXIgfSBmcm9tICcuLi9qcy9udW1iZXJfZm9ybWF0JzsKaW1wb3J0IGdldFVSTFBhcmFtZXRlciBmcm9tICcuLi9qcy9nZXR1cmxwYXJhbXMnOwppbXBvcnQgeyBzY2FsZUxpbmVhciB9IGZyb20gJ2QzLXNjYWxlJzsKaW1wb3J0IGdlb2cgZnJvbSAnLi4vLi4vZGF0YS9nZW9ncmFwaHkuZ2VvanNvbi5qc29uJzsKaW1wb3J0IHZpcm91c2dlb2cgZnJvbSAnLi4vLi4vZGF0YS9jb25maWcvQ09WSUQuZ2VvanNvbi5qc29uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzYy1tYXAnLAogIHdhdGNoOiAoX3dhdGNoID0gewogICAgJ3NoYXJlZFN0YXRlLnNlbGVjdGVkJzogJ3NlbGVjdE5laWdoYm9yaG9vZHMnLAogICAgJ3NoYXJlZFN0YXRlLnllYXInOiAndXBkYXRlWWVhcicKICB9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAic2hhcmVkU3RhdGUuc2VsZWN0ZWQiLCAnc3R5bGVOZWlnaGJvcmhvb2RzJyksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICdzaGFyZWRTdGF0ZS5oaWdobGlnaHQnLCAnc3R5bGVOZWlnaGJvcmhvb2RzJyksIF93YXRjaCksCiAgbWV0aG9kczogewogICAgaW5pdE1hcDogZnVuY3Rpb24gaW5pdE1hcCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLnByaXZhdGVTdGF0ZS5tYXAgPSBuZXcgbWFwYm94Z2wuTWFwKF90aGlzLnByaXZhdGVTdGF0ZS5tYXBPcHRpb25zKTsKICAgICAgdmFyIG1hcCA9IF90aGlzLnByaXZhdGVTdGF0ZS5tYXA7IC8vIGFkZCBuYXYgY29udHJvbAoKICAgICAgdmFyIG5hdiA9IG5ldyBtYXBib3hnbC5OYXZpZ2F0aW9uQ29udHJvbCgpOwogICAgICBtYXAuYWRkQ29udHJvbChuYXYsICd0b3AtcmlnaHQnKTsgLy8gUGl0Y2ggY29udHJvbAoKICAgICAgdmFyIFBpdGNoQ29udHJvbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gUGl0Y2hDb250cm9sKCkgewogICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBpdGNoQ29udHJvbCk7CgogICAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvblBpdGNoIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGl0Y2ggPSBfdGhpczIuX21hcC5nZXRQaXRjaCgpOwoKICAgICAgICAgICAgdmFyIGlzM0RNb2RlID0gcGl0Y2ggPiA1OwoKICAgICAgICAgICAgX3RoaXMyLl9jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaXMzRE1vZGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfY3JlYXRlQ2xhc3MoUGl0Y2hDb250cm9sLCBbewogICAgICAgICAga2V5OiAib25BZGQiLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkKG1hcCkgewogICAgICAgICAgICB0aGlzLl9tYXAgPSBtYXA7CiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdtYXBib3hnbC1jdHJsIG1hcGJveGdsLWN0cmwtZ3JvdXAnOwogICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxidXR0b24gY2xhc3M9Im1hcGJveGdsLWN0cmwtaWNvbiBtYXBib3hnbC1jdHJsLWN1c3RvbS1waXRjaCIgdHlwZT0iYnV0dG9uIj48c3Bhbj4zRDwvc3Bhbj48L2J1dHRvbj4nOwoKICAgICAgICAgICAgY29udGFpbmVyLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIHBpdGNoID0gbWFwLmdldFBpdGNoKCk7CiAgICAgICAgICAgICAgdmFyIHpvb20gPSBtYXAuZ2V0Wm9vbSgpOwogICAgICAgICAgICAgIHZhciBuZXh0UGl0Y2ggPSAwOwogICAgICAgICAgICAgIGlmIChwaXRjaCA8PSA1KSBuZXh0UGl0Y2ggPSAzMDsKCiAgICAgICAgICAgICAgaWYgKHpvb20gPCAxMCAmJiBwaXRjaCA8IDUpIHsKICAgICAgICAgICAgICAgIG1hcC5mbHlUbyh7CiAgICAgICAgICAgICAgICAgIHBpdGNoOiBuZXh0UGl0Y2ggLy96b29tOiA4LAoKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtYXAuZWFzZVRvKHsKICAgICAgICAgICAgICAgICAgcGl0Y2g6IG5leHRQaXRjaAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbWFwLm9uKCdwaXRjaGVuZCcsIHRoaXMub25QaXRjaCk7CiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICJvblJlbW92ZSIsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7CiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NvbnRhaW5lcik7CgogICAgICAgICAgICB0aGlzLl9tYXAub2ZmKCdwaXRjaGVuZCcsIHRoaXMub25QaXRjaCk7CgogICAgICAgICAgICB0aGlzLl9tYXAgPSB1bmRlZmluZWQ7CiAgICAgICAgICB9CiAgICAgICAgfV0pOwoKICAgICAgICByZXR1cm4gUGl0Y2hDb250cm9sOwogICAgICB9KCk7CgogICAgICA7CiAgICAgIG1hcC5hZGRDb250cm9sKG5ldyBQaXRjaENvbnRyb2woKSwgJ3RvcC1yaWdodCcpOyAvLyBkaXNhYmxlIG1hcCByb3RhdGlvbiB1c2luZyByaWdodCBjbGljayArIGRyYWcgYW5kIHRvdWNoCgogICAgICBpZiAoX3RoaXMucHJpdmF0ZVN0YXRlLnBpdGNoID09PSBmYWxzZSkgewogICAgICAgIC8vbWFwLmRyYWdSb3RhdGUuZGlzYWJsZSgpOwogICAgICAgIG1hcC50b3VjaFpvb21Sb3RhdGUuZGlzYWJsZVJvdGF0aW9uKCk7CiAgICAgIH0gLy8gYWZ0ZXIgbWFwIGluaXRpYXRlZCwgZ3JhYiBnZW9ncmFwaHkgYW5kIGludGlhdGUvc3R5bGUgbmVpZ2hib3Job29kcwoKCiAgICAgIG1hcC5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5wcml2YXRlU3RhdGUubWFwTG9hZGVkID0gdHJ1ZTsKICAgICAgICBfdGhpcy5wcml2YXRlU3RhdGUuZ2VvSlNPTiA9IGdlb2c7CgogICAgICAgIF90aGlzLmluaXROZWlnaGJvcmhvb2RzKCk7CgogICAgICAgIF90aGlzLnN0eWxlTmVpZ2hib3Job29kcygpOwoKICAgICAgICBfdGhpcy5pbml0TWFwRXZlbnRzKCk7CgogICAgICAgIGlmIChfdGhpcy5zaGFyZWRTdGF0ZS5zZWxlY3RlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBfdGhpcy56b29tTmVpZ2hib3Job29kcygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaW5pdE1hcEV2ZW50czogZnVuY3Rpb24gaW5pdE1hcEV2ZW50cygpIHsKICAgICAgdmFyIG1hcCA9IHRoaXMucHJpdmF0ZVN0YXRlLm1hcDsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcG9wdXAgPSBuZXcgbWFwYm94Z2wuUG9wdXAoewogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZSwKICAgICAgICBjbG9zZU9uQ2xpY2s6IGZhbHNlCiAgICAgIH0pOwogICAgICBtYXAub24oJ21vdXNlbW92ZScsICduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgbWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsKICAgICAgICB2YXIgZmVhdHVyZSA9IGUuZmVhdHVyZXNbMF07CiAgICAgICAgcG9wdXAuc2V0TG5nTGF0KG1hcC51bnByb2plY3QoZS5wb2ludCkpLnNldEhUTUwoIjxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMDsgcGFkZGluZzogMDtcIj5cblx0XHRcdFVyYmFuIFpvbmU6ICIuY29uY2F0KGZlYXR1cmUucHJvcGVydGllcy5TVUJaT05FX04sICI8L2Rpdj5cdFx0XHRcblx0XHRcdDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMDsgcGFkZGluZzogMDtcIj4gUGxhbiBBcmVhOiAiKS5jb25jYXQoZmVhdHVyZS5wcm9wZXJ0aWVzLlBMTl9BUkVBX04sICI8L2Rpdj5cblx0XHRcdDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMDsgcGFkZGluZzogMDtcIj4gUG9wdWxhdGlvbjogIikuY29uY2F0KGZlYXR1cmUucHJvcGVydGllcy5UT1RBTCwgIjwvZGl2PiIpKS5hZGRUbyhtYXApOwogICAgICB9KTsKICAgICAgbWFwLm9uKCdtb3VzZWxlYXZlJywgJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJywgZnVuY3Rpb24gKCkgewogICAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAnJzsKICAgICAgICBwb3B1cC5yZW1vdmUoKTsKICAgICAgfSk7CiAgICAgIG1hcC5vbigncm90YXRlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAobWFwLmdldFBpdGNoKCkgPj0gMjApIHsKICAgICAgICAgIF90aGlzLnRvZ2dsZTNEKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLnRvZ2dsZTNEKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGUzRDogZnVuY3Rpb24gdG9nZ2xlM0QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbWFwID0gX3RoaXMucHJpdmF0ZVN0YXRlLm1hcDsKICAgICAgdmFyIHBpdGNoZWQ7CiAgICAgIG1hcC5nZXRQaXRjaCgpID49IDIwID8gcGl0Y2hlZCA9IHRydWUgOiBwaXRjaGVkID0gZmFsc2U7CgogICAgICBpZiAocGl0Y2hlZCkgewogICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnbmVpZ2hib3Job29kcycsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgICBtYXAubW92ZUxheWVyKCduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScpOwogICAgICAgIG1hcC5zZXRQYWludFByb3BlcnR5KCduZWlnaGJvcmhvb2RzLWZpbGwtZXh0cnVkZScsICdmaWxsLWV4dHJ1c2lvbi1oZWlnaHQnLCBfdGhpcy5nZXRIZWlnaHQoKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KCduZWlnaGJvcmhvb2RzJywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpOwogICAgICAgIG1hcC5tb3ZlTGF5ZXIoJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJywgJ2J1aWxkaW5nJyk7CiAgICAgICAgbWFwLnNldFBhaW50UHJvcGVydHkoJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJywgJ2ZpbGwtZXh0cnVzaW9uLWhlaWdodCcsIDApOwogICAgICB9CiAgICB9LAogICAgaW5pdE5laWdoYm9yaG9vZHM6IGZ1bmN0aW9uIGluaXROZWlnaGJvcmhvb2RzKCkgewogICAgICB2YXIgbWFwID0gdGhpcy5wcml2YXRlU3RhdGUubWFwOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBnZW9KU09OID0gX3RoaXMucHJpdmF0ZVN0YXRlLmdlb0pTT047CiAgICAgIG1hcC5hZGRTb3VyY2UoJ25laWdoYm9yaG9vZHMnLCB7CiAgICAgICAgdHlwZTogJ2dlb2pzb24nLAogICAgICAgIGRhdGE6IGdlb0pTT04KICAgICAgfSk7IC8vIG5laWdoYm9yaG9vZCBib3VuZGFyaWVzCgogICAgICBtYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAnbmVpZ2hib3Job29kcycsCiAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgIHNvdXJjZTogJ25laWdoYm9yaG9vZHMnLAogICAgICAgIGxheW91dDoge30sCiAgICAgICAgcGFpbnQ6IHt9CiAgICAgIH0sICdwbGFjZV9vdGhlcicpOwogICAgICBtYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAnbmVpZ2hib3Job29kcy1maWxsLWV4dHJ1ZGUnLAogICAgICAgIHR5cGU6ICdmaWxsLWV4dHJ1c2lvbicsCiAgICAgICAgc291cmNlOiAnbmVpZ2hib3Job29kcycsCiAgICAgICAgLy8nZmlsdGVyJzogWychPScsICdjaG9yb3BsZXRoJywgJ251bGwnXSwKICAgICAgICBwYWludDogewogICAgICAgICAgJ2ZpbGwtZXh0cnVzaW9uLW9wYWNpdHknOiAwLjcKICAgICAgICB9CiAgICAgIH0sICdidWlsZGluZycpOyAvLyBtYXJrZXJzIGxheWVyCgogICAgICBtYXAuYWRkU291cmNlKCdtYXJrZXJzJywgewogICAgICAgIHR5cGU6ICdnZW9qc29uJywKICAgICAgICBkYXRhOiB2aXJvdXNnZW9nCiAgICAgIH0pOwogICAgICBtYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAnbWFya2VycycsCiAgICAgICAgdHlwZTogJ2NpcmNsZScsCiAgICAgICAgc291cmNlOiAnbWFya2VycycsCgogICAgICAgIC8qIGxheW91dDogew0KICAgICAgICAgICdpY29uLWltYWdlJzogJ2NpcmNsZS0xMScsDQogICAgICAgICAgJ2ljb24tc2l6ZSc6IDEuMCwNCiAgICAgICAgICAgICAgfSAqLwogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDEwLAogICAgICAgICAgJ2NpcmNsZS1jb2xvcic6ICcjZmYwMDAwJwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcC5zZXRQaXRjaCgzMCk7CiAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnbmVpZ2hib3Job29kcycsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgbWFwLm1vdmVMYXllcignbmVpZ2hib3Job29kcy1maWxsLWV4dHJ1ZGUnKTsKICAgICAgbWFwLnNldFBhaW50UHJvcGVydHkoJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJywgJ2ZpbGwtZXh0cnVzaW9uLWhlaWdodCcsIF90aGlzLmdldEhlaWdodCgpKTsKICAgIH0sCiAgICBzZWxlY3ROZWlnaGJvcmhvb2RzOiBmdW5jdGlvbiBzZWxlY3ROZWlnaGJvcmhvb2RzKCkgewogICAgICBpZiAodGhpcy5wcml2YXRlU3RhdGUubWFwTG9hZGVkID09PSB0cnVlKSB7CiAgICAgICAgdmFyIG1hcCA9IHRoaXMucHJpdmF0ZVN0YXRlLm1hcDsKICAgICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLnNoYXJlZFN0YXRlLnNlbGVjdGVkOwogICAgICAgIHZhciBmaWx0ZXI7CgogICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmaWx0ZXIgPSBbJ2luJywgJ2lkJ107CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBmaWx0ZXIucHVzaChzZWxlY3RlZFtpXSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpbHRlciA9IFsnaW4nLCAnaWQnLCAnLTk5OTk5OSddOwogICAgICAgIH0gLy8gcHVzaCBzZWxlY3RlZCBzdGF0ZQoKCiAgICAgICAgdmFyIGxpbmtNZXRyaWMgPSAnJzsKCiAgICAgICAgaWYgKGdldFVSTFBhcmFtZXRlcignbScpKSB7CiAgICAgICAgICBsaW5rTWV0cmljID0gZ2V0VVJMUGFyYW1ldGVyKCdtJyk7CiAgICAgICAgfQoKICAgICAgICBtYXAuc2V0RmlsdGVyKCduZWlnaGJvcmhvb2RzLWxpbmUtc2VsZWN0ZWQnLCBmaWx0ZXIpOwogICAgICAgIG1hcC5zZXRGaWx0ZXIoJ25laWdoYm9yaG9vZHMtZmlsbC1zZWxlY3RlZCcsIGZpbHRlcik7CiAgICAgIH0KICAgIH0sCiAgICBzdHlsZU5laWdoYm9yaG9vZHM6IGZ1bmN0aW9uIHN0eWxlTmVpZ2hib3Job29kcygpIHsKICAgICAgdmFyIG1hcCA9IHRoaXMucHJpdmF0ZVN0YXRlLm1hcDsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBtYXAuc2V0UGFpbnRQcm9wZXJ0eSgnbmVpZ2hib3Job29kcy1maWxsLWV4dHJ1ZGUnLCAnZmlsbC1leHRydXNpb24tY29sb3InLCBfdGhpcy5nZXRDb2xvcnMoKSk7CiAgICAgIG1hcC5zZXRQYWludFByb3BlcnR5KCduZWlnaGJvcmhvb2RzJywgJ2xpbmUtY29sb3InLCBfdGhpcy5nZXRPdXRsaW5lQ29sb3IoKSk7CiAgICAgIG1hcC5zZXRQYWludFByb3BlcnR5KCduZWlnaGJvcmhvb2RzJywgJ2xpbmUtd2lkdGgnLCBfdGhpcy5nZXRPdXRsaW5lV2lkdGgoKSk7CgogICAgICBpZiAoX3RoaXMucHJpdmF0ZVN0YXRlLmlzUGl0Y2hlZDNEKSB7CiAgICAgICAgbWFwLnNldFBhaW50UHJvcGVydHkoJ25laWdoYm9yaG9vZHMtZmlsbC1leHRydWRlJywgJ2ZpbGwtZXh0cnVzaW9uLWhlaWdodCcsIF90aGlzLmdldEhlaWdodCgpKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUNob3JvcGxldGg6IGZ1bmN0aW9uIHVwZGF0ZUNob3JvcGxldGgoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5wcml2YXRlU3RhdGUubWFwTG9hZGVkKSB7CiAgICAgICAgdGhpcy5zdHlsZU5laWdoYm9yaG9vZHMoKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUJyZWFrczogZnVuY3Rpb24gdXBkYXRlQnJlYWtzKCkgewogICAgICB0aGlzLnByaXZhdGVTdGF0ZS5tZXRyaWNJZCA9IHRoaXMuc2hhcmVkU3RhdGUubWV0cmljSWQ7CiAgICAgIHRoaXMudXBkYXRlQ2hvcm9wbGV0aCgpOwogICAgfSwKICAgIHVwZGF0ZVllYXI6IGZ1bmN0aW9uIHVwZGF0ZVllYXIoKSB7CiAgICAgIGlmICh0aGlzLnNoYXJlZFN0YXRlLm1ldHJpY0lkID09PSB0aGlzLnByaXZhdGVTdGF0ZS5tZXRyaWNJZCkgewogICAgICAgIHRoaXMudXBkYXRlQ2hvcm9wbGV0aCgpOwogICAgICB9CiAgICB9LAogICAgZ2VvSlNPTk1lcmdlOiBmdW5jdGlvbiBnZW9KU09OTWVyZ2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZ2VvT2JqID0gZ2VvanNvbkRhdGFNZXJnZShfdGhpcy5wcml2YXRlU3RhdGUuZ2VvSlNPTiwgX3RoaXMuc2hhcmVkU3RhdGUubWV0cmljLmRhdGEubWFwLCBfdGhpcy5zaGFyZWRTdGF0ZS55ZWFyKTsKICAgICAgcmV0dXJuIGdlb09iajsKICAgIH0sCiAgICBnZXRGdWxsQm91bmRzOiBmdW5jdGlvbiBnZXRGdWxsQm91bmRzKCkgewogICAgICB2YXIgYm91bmRzID0gbmV3IG1hcGJveGdsLkxuZ0xhdEJvdW5kcygpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMucHJpdmF0ZVN0YXRlLmdlb0pTT04uZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkgewogICAgICAgIGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoY29vcmQpIHsKICAgICAgICAgIGNvb3JkLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIGJvdW5kcy5leHRlbmQoZWwpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gYm91bmRzOwogICAgfSwKICAgIHpvb21OZWlnaGJvcmhvb2RzOiBmdW5jdGlvbiB6b29tTmVpZ2hib3Job29kcygpIHsKICAgICAgdmFyIGJvdW5kcyA9IG5ldyBtYXBib3hnbC5MbmdMYXRCb3VuZHMoKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnByaXZhdGVTdGF0ZS5nZW9KU09OLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHsKICAgICAgICBpZiAoX3RoaXMuc2hhcmVkU3RhdGUuc2VsZWN0ZWQuaW5kZXhPZihmZWF0dXJlLnByb3BlcnRpZXMuaWQpICE9PSAtMSkgewogICAgICAgICAgZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChjb29yZCkgewogICAgICAgICAgICBjb29yZC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgIGJvdW5kcy5leHRlbmQoZWwpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMucHJpdmF0ZVN0YXRlLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7CiAgICAgICAgcGFkZGluZzogMTAwCiAgICAgIH0pOwogICAgfSwKICAgIGdldE91dGxpbmVDb2xvcjogZnVuY3Rpb24gZ2V0T3V0bGluZUNvbG9yKCkgewogICAgICB2YXIgc3RvcHMgPSBbXTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5zaGFyZWRTdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uIChpZCkgewogICAgICAgIHN0b3BzLnB1c2goW2lkLCAnI2JhMDBlNCddKTsKICAgICAgfSk7CgogICAgICB2YXIgb3V0bGluZSA9IHsKICAgICAgICBwcm9wZXJ0eTogJ09CSkVDVElEJywKICAgICAgICAiZGVmYXVsdCI6ICdyZ2JhKDAsMCwwLDEpJywKICAgICAgICB0eXBlOiAnY2F0ZWdvcmljYWwnLAogICAgICAgIHN0b3BzOiBzdG9wcwogICAgICB9OwoKICAgICAgaWYgKHN0b3BzLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gb3V0bGluZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gb3V0bGluZVsiZGVmYXVsdCJdOwogICAgICB9CiAgICB9LAogICAgZ2V0T3V0bGluZVdpZHRoOiBmdW5jdGlvbiBnZXRPdXRsaW5lV2lkdGgoKSB7CiAgICAgIHZhciBzdG9wcyA9IFtdOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLnNoYXJlZFN0YXRlLnNlbGVjdGVkLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgc3RvcHMucHVzaChbaWQsIDRdKTsKICAgICAgfSk7CgogICAgICB2YXIgb3V0bGluZVNpemUgPSB7CiAgICAgICAgcHJvcGVydHk6ICdPQkpFQ1RJRCcsCiAgICAgICAgImRlZmF1bHQiOiAwLjQsCiAgICAgICAgdHlwZTogJ2NhdGVnb3JpY2FsJywKICAgICAgICBzdG9wczogc3RvcHMKICAgICAgfTsKCiAgICAgIGlmIChzdG9wcy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIG91dGxpbmVTaXplOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBvdXRsaW5lU2l6ZVsiZGVmYXVsdCJdOwogICAgICB9CgogICAgICByZXR1cm4gc3RvcHM7CiAgICB9LAogICAgZ2V0Q29sb3JzOiBmdW5jdGlvbiBnZXRDb2xvcnMoKSB7CiAgICAgIHZhciBzdG9wcyA9IFtdOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmZWF0dXJlID0gX3RoaXMucHJpdmF0ZVN0YXRlLmdlb0pTT04uZmVhdHVyZXM7CiAgICAgIHZhciBpZCA9IDE7CiAgICAgIHZhciBkYXRhID0gZmVhdHVyZTsKICAgICAgdmFyIGJyZWFrcyA9IFszMTI1LCA2MjUwLCAxMjUwMCwgMjUwMDAsIDUwMDAwLCAyMDAwMDBdOwogICAgICBfdGhpcy5zaGFyZWRTdGF0ZS5icmVha3MgPSBicmVha3M7CiAgICAgIHZhciBjb2xvcnMgPSB0aGlzLnNoYXJlZFN0YXRlLmNvbG9yczsKCiAgICAgIHZhciBjb2xvciA9IGZ1bmN0aW9uIGNvbG9yKHZhbCkgewogICAgICAgIGlmICh2YWwgPD0gYnJlYWtzWzFdKSB7CiAgICAgICAgICByZXR1cm4gY29sb3JzWzBdOwogICAgICAgIH0gZWxzZSBpZiAodmFsIDw9IGJyZWFrc1syXSkgewogICAgICAgICAgcmV0dXJuIGNvbG9yc1sxXTsKICAgICAgICB9IGVsc2UgaWYgKHZhbCA8PSBicmVha3NbM10pIHsKICAgICAgICAgIHJldHVybiBjb2xvcnNbMl07CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPD0gYnJlYWtzWzRdKSB7CiAgICAgICAgICByZXR1cm4gY29sb3JzWzNdOwogICAgICAgIH0gZWxzZSBpZiAodmFsIDw9IGJyZWFrc1s1XSkgewogICAgICAgICAgcmV0dXJuIGNvbG9yc1s0XTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkgewogICAgICAgIHZhciB2YWx1ZSA9IF90aGlzLnNoYXJlZFN0YXRlLmhpZ2hsaWdodC5sZW5ndGg7CgogICAgICAgIGlmICh2YWx1ZSAhPT0gMCAmJiBpZCA8IHZhbHVlKSB7CiAgICAgICAgICBzdG9wcy5wdXNoKFtOdW1iZXIoX3RoaXMuc2hhcmVkU3RhdGUuaGlnaGxpZ2h0W2lkXSksICcjRjdFNTVCJ10pOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gMCkgewogICAgICAgICAgc3RvcHMucHVzaChbZGF0YVtpZF0ucHJvcGVydGllcy5PQkpFQ1RJRCwgY29sb3IoZGF0YVtpZF0ucHJvcGVydGllcy5UT1RBTCldKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgZmlsbENvbG9yID0gewogICAgICAgIHByb3BlcnR5OiAnT0JKRUNUSUQnLAogICAgICAgICJkZWZhdWx0IjogJ3JnYigyNDIsMjQzLDI0MCknLAogICAgICAgIHR5cGU6ICdjYXRlZ29yaWNhbCcsCiAgICAgICAgc3RvcHM6IHN0b3BzCiAgICAgIH07CiAgICAgIHJldHVybiBmaWxsQ29sb3I7CiAgICB9LAogICAgZ2V0SGVpZ2h0OiBmdW5jdGlvbiBnZXRIZWlnaHQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc3RvcHMgPSBbXTsKICAgICAgdmFyIGZlYXR1cmUgPSBfdGhpcy5wcml2YXRlU3RhdGUuZ2VvSlNPTi5mZWF0dXJlczsKICAgICAgdmFyIGlkID0gMTsKICAgICAgdmFyIGRhdGEgPSBmZWF0dXJlOwogICAgICB2YXIgaGJyZWFrcyA9IFszMTI1LCA2MjUwLCAxMjUwMCwgMjUwMDAsIDUwMDAwLCAyMDAwMDBdOwogICAgICBfdGhpcy5zaGFyZWRTdGF0ZS5icmVha3MgPSBoYnJlYWtzOwogICAgICB2YXIgaGVpZ2h0QWRqdXN0ID0gc2NhbGVMaW5lYXIoKS5kb21haW4oW2hicmVha3MsIGhicmVha3NbaGJyZWFrcy5sZW5ndGggLSAxXV0pLnJhbmdlKFswLCAyMDAwMDBdKTsKICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHsKICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2lkXS5wcm9wZXJ0aWVzLlRPVEFMOwoKICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHsKICAgICAgICAgIHN0b3BzLnB1c2goW2RhdGFbaWRdLnByb3BlcnRpZXMuT0JKRUNUSUQsIHZhbHVlIC8gMTAwXSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIGhlaWdodCA9IHsKICAgICAgICBwcm9wZXJ0eTogJ09CSkVDVElEJywKICAgICAgICAiZGVmYXVsdCI6IDAsCiAgICAgICAgdHlwZTogJ2NhdGVnb3JpY2FsJywKICAgICAgICBzdG9wczogc3RvcHMKICAgICAgfTsKICAgICAgcmV0dXJuIGhlaWdodDsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRNYXAoKTsKICB9Cn07"},{"version":3,"sources":["map.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"\" style=\"position: relative; width: 100%; height: 100%\">\r\n    <div id=\"map\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mapboxgl from 'mapbox-gl';\r\nimport geojsonDataMerge from '../js/geojsondatamerge';\r\nimport {\r\n  prettyNumber\r\n} from '../js/number_format';\r\nimport getURLParameter from '../js/geturlparams';\r\nimport {\r\n  scaleLinear\r\n} from 'd3-scale';\r\nimport geog from '../../data/geography.geojson.json';\r\nimport virousgeog from '../../data/config/COVID.geojson.json';\r\n\r\nexport default {\r\n  name: 'sc-map',\r\n  watch: {\r\n    'sharedState.selected': 'selectNeighborhoods',\r\n    \r\n    'sharedState.year': 'updateYear',\r\n    'sharedState.selected': 'styleNeighborhoods',\r\n    'sharedState.highlight': 'styleNeighborhoods'\r\n  },\r\n  methods: {\r\n    initMap: function () {\r\n      let _this = this;\r\n      _this.privateState.map = new mapboxgl.Map(_this.privateState.mapOptions);\r\n\r\n      let map = _this.privateState.map;\r\n\t\t \r\n      // add nav control\r\n      var nav = new mapboxgl.NavigationControl();\r\n      map.addControl(nav, 'top-right');\r\n\r\n\t  // Pitch control\r\n    class PitchControl {\r\n      onAdd(map) {\r\n        this._map = map;\r\n        const container = document.createElement('div');\r\n        container.className = 'mapboxgl-ctrl mapboxgl-ctrl-group';\r\n        container.innerHTML = '<button class=\"mapboxgl-ctrl-icon mapboxgl-ctrl-custom-pitch\" type=\"button\"><span>3D</span></button>';\r\n        container.onclick = function(){\r\n          const pitch = map.getPitch();\r\n          const zoom = map.getZoom();\r\n          let nextPitch = 0;\r\n          if (pitch <= 5) nextPitch = 30;\r\n          if (zoom < 10 && pitch < 5) {\r\n            map.flyTo({\r\n              pitch: nextPitch,\r\n              //zoom: 8,\r\n            });\r\n          } else {\r\n            map.easeTo({\r\n              pitch: nextPitch\r\n            });\r\n          }\r\n        };\r\n        map.on('pitchend', this.onPitch);\r\n        this._container = container;\r\n        return this._container;\r\n      }\r\n      onPitch = () => {\r\n        const pitch = this._map.getPitch();\r\n        const is3DMode = pitch > 5;\r\n        this._container.classList.toggle('active', is3DMode);\r\n      }\r\n      onRemove() {\r\n        this._container.parentNode.removeChild(this._container);\r\n        this._map.off('pitchend', this.onPitch);\r\n        this._map = undefined;\r\n      }\r\n    };\r\n    map.addControl(new PitchControl(), 'top-right');\r\n\t  \r\n      // disable map rotation using right click + drag and touch\r\n      if (_this.privateState.pitch === false) {\r\n        //map.dragRotate.disable();\r\n        map.touchZoomRotate.disableRotation();\r\n      }\r\n\r\n      // after map initiated, grab geography and intiate/style neighborhoods\r\n      map.on('load', function () {\r\n        _this.privateState.mapLoaded = true;\r\n        _this.privateState.geoJSON = geog;\r\n        _this.initNeighborhoods();\r\n        _this.styleNeighborhoods();\r\n        _this.initMapEvents();\r\n\r\n        if (_this.sharedState.selected.length > 0) {\r\n          _this.zoomNeighborhoods();\r\n        }\r\n      });\r\n\r\n    },\r\n    initMapEvents: function () {\r\n      let map = this.privateState.map;\r\n      let _this = this;\r\n      let popup = new mapboxgl.Popup({\r\n        closeButton: false,\r\n        closeOnClick: false\r\n      });\r\n\r\n      map.on('mousemove', 'neighborhoods-fill-extrude', function (e) {\r\n        map.getCanvas().style.cursor = 'pointer';\r\n        let feature = e.features[0];\r\n        \r\n        popup\r\n          .setLngLat(map.unproject(e.point))\r\n          .setHTML(\r\n            `<div style=\"text-align: center; margin: 0; padding: 0;\">\r\n\t\t\tUrban Zone: ${feature.properties.SUBZONE_N}</div>\t\t\t\r\n\t\t\t<div style=\"text-align: center; margin: 0; padding: 0;\"> Plan Area: ${feature.properties.PLN_AREA_N}</div>\r\n\t\t\t<div style=\"text-align: center; margin: 0; padding: 0;\"> Population: ${feature.properties.TOTAL}</div>`\r\n          )\r\n          .addTo(map);\r\n      });\r\n\r\n      map.on('mouseleave', 'neighborhoods-fill-extrude', function () {\r\n        map.getCanvas().style.cursor = '';\r\n        popup.remove();\r\n      });\r\n\r\n      map.on('rotate', function (e) {\r\n        if (map.getPitch() >= 20) {\r\n          _this.toggle3D();\r\n        } else {\r\n          _this.toggle3D();\r\n        }\r\n      });\r\n    },\r\n    toggle3D: function () {\r\n      let _this = this;\r\n      let map = _this.privateState.map;\r\n      let pitched;\r\n\r\n      map.getPitch() >= 20 ? (pitched = true) : (pitched = false);\r\n\r\n      if (pitched) {\r\n        map.setLayoutProperty('neighborhoods', 'visibility', 'none');\r\n        map.moveLayer('neighborhoods-fill-extrude');\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          _this.getHeight()\r\n        );\r\n      } else {\r\n        map.setLayoutProperty('neighborhoods', 'visibility', 'visible');\r\n        map.moveLayer('neighborhoods-fill-extrude', 'building');\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          0\r\n        );\r\n      }\r\n    },\r\n    initNeighborhoods: function () {\r\n      let map = this.privateState.map;\r\n      let _this = this;\r\n      let geoJSON = _this.privateState.geoJSON;\r\n\r\n      map.addSource('neighborhoods', {\r\n        type: 'geojson',\r\n        data: geoJSON\r\n      });\r\n\r\n      // neighborhood boundaries\r\n      map.addLayer({\r\n          id: 'neighborhoods',\r\n          type: 'line',\r\n          source: 'neighborhoods',\r\n          layout: {},\r\n          paint: {}\r\n        },\r\n        'place_other'\r\n      );\r\n\r\n      map.addLayer({\r\n          id: 'neighborhoods-fill-extrude',\r\n          type: 'fill-extrusion',\r\n          source: 'neighborhoods',\r\n          //'filter': ['!=', 'choropleth', 'null'],\r\n          paint: {\r\n            'fill-extrusion-opacity': 0.7\r\n          }\r\n        },\r\n        'building'\r\n      );\r\n\t  \r\n      // markers layer\r\n      map.addSource('markers', {\r\n        type: 'geojson',\r\n        data: virousgeog\r\n      });\r\n      map.addLayer({\r\n        id: 'markers',\r\n        type: 'circle',\r\n        source: 'markers',\r\n        /* layout: {\r\n          'icon-image': 'circle-11',\r\n          'icon-size': 1.0,\r\n\t\t  \r\n        } */\r\n\t\tpaint: {\r\n\t\t'circle-radius': 10,\r\n\t\t'circle-color': '#ff0000'\r\n\t\t}\r\n      });\r\n\t  \r\n\r\n\t  \tmap.setPitch(30)\r\n\t\tmap.setLayoutProperty('neighborhoods', 'visibility', 'none');\r\n        map.moveLayer('neighborhoods-fill-extrude');\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          _this.getHeight()\r\n        );\r\n    },\r\n    selectNeighborhoods: function () {\r\n      if (this.privateState.mapLoaded === true) {\r\n        let map = this.privateState.map;\r\n        let selected = this.sharedState.selected;\r\n        let filter;\r\n\r\n        if (selected.length > 0) {\r\n          filter = ['in', 'id'];\r\n          for (let i = 0; i < selected.length; i++) {\r\n            filter.push(selected[i]);\r\n          }\r\n        } else {\r\n          filter = ['in', 'id', '-999999'];\r\n        }\r\n\r\n        // push selected state\r\n        let linkMetric = '';\r\n        if (getURLParameter('m')) {\r\n          linkMetric = getURLParameter('m');\r\n        }\r\n\r\n        map.setFilter('neighborhoods-line-selected', filter);\r\n        map.setFilter('neighborhoods-fill-selected', filter);\r\n      }\r\n    },\r\n    styleNeighborhoods: function () {\r\n      let map = this.privateState.map;\r\n      let _this = this;\r\n\r\n      map.setPaintProperty(\r\n        'neighborhoods-fill-extrude',\r\n        'fill-extrusion-color',\r\n        _this.getColors()\r\n      );\r\n      map.setPaintProperty(\r\n        'neighborhoods',\r\n        'line-color',\r\n        _this.getOutlineColor()\r\n      );\r\n      map.setPaintProperty(\r\n        'neighborhoods',\r\n        'line-width',\r\n        _this.getOutlineWidth()\r\n      );\r\n\t  \r\n      if (_this.privateState.isPitched3D) {\r\n        map.setPaintProperty(\r\n          'neighborhoods-fill-extrude',\r\n          'fill-extrusion-height',\r\n          _this.getHeight()\r\n        );\r\n      }\r\n    },\r\n    updateChoropleth: function () {\r\n      let _this = this;\r\n      if (this.privateState.mapLoaded) {\r\n        this.styleNeighborhoods();\r\n      }\r\n    },\r\n    updateBreaks: function () {\r\n      this.privateState.metricId = this.sharedState.metricId;\r\n      this.updateChoropleth();\r\n    },\r\n    updateYear: function () {\r\n      if (this.sharedState.metricId === this.privateState.metricId) {\r\n        this.updateChoropleth();\r\n      }\r\n    },\r\n    geoJSONMerge: function () {\r\n      let _this = this;\r\n      let geoObj = geojsonDataMerge(\r\n        _this.privateState.geoJSON,\r\n        _this.sharedState.metric.data.map,\r\n        _this.sharedState.year\r\n      );\r\n      return geoObj;\r\n    },\r\n    getFullBounds: function () {\r\n      let bounds = new mapboxgl.LngLatBounds();\r\n      let _this = this;\r\n\r\n      this.privateState.geoJSON.features.forEach(function (feature) {\r\n        feature.geometry.coordinates.forEach(function (coord) {\r\n          coord.forEach(function (el) {\r\n            bounds.extend(el);\r\n          });\r\n        });\r\n      });\r\n\r\n      return bounds;\r\n    },\r\n    zoomNeighborhoods: function () {\r\n      let bounds = new mapboxgl.LngLatBounds();\r\n      let _this = this;\r\n\r\n      this.privateState.geoJSON.features.forEach(function (feature) {\r\n        if (_this.sharedState.selected.indexOf(feature.properties.id) !== -1) {\r\n          feature.geometry.coordinates.forEach(function (coord) {\r\n            coord.forEach(function (el) {\r\n              bounds.extend(el);\r\n            });\r\n          });\r\n        }\r\n      });\r\n\r\n      this.privateState.map.fitBounds(bounds, {\r\n        padding: 100\r\n      });\r\n    },\r\n    getOutlineColor: function () {\r\n      const stops = [];\r\n      let _this = this;\r\n\r\n      _this.sharedState.selected.forEach(id => {\r\n        stops.push([id, '#ba00e4']);\r\n      });\r\n\r\n      let outline = {\r\n        property: 'OBJECTID',\r\n        default: 'rgba(0,0,0,1)',\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      if (stops.length > 0) {\r\n        return outline;\r\n      } else {\r\n        return outline.default;\r\n      }\r\n    },\r\n    getOutlineWidth: function () {\r\n      const stops = [];\r\n      let _this = this;\r\n\r\n      _this.sharedState.selected.forEach(id => {\r\n        stops.push([id, 4]);\r\n      });\r\n\r\n      let outlineSize = {\r\n        property: 'OBJECTID',\r\n        default: 0.4,\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      if (stops.length > 0) {\r\n        return outlineSize;\r\n      } else {\r\n        return outlineSize.default;\r\n      }\r\n\r\n      return stops;\r\n    },\r\n    getColors: function () {\r\n      const stops = [];\r\n      let _this = this;\r\n\t  \r\n\t  let feature = _this.privateState.geoJSON.features;\r\n      let id = 1;  \r\n      let data = feature;\r\n\t  \r\n      let breaks = [3125,6250,12500,25000,50000,200000];\r\n\t  _this.sharedState.breaks = breaks;\r\n      let colors = this.sharedState.colors;\r\n\r\n      let color = function (val) {\r\n        if (val <= breaks[1]) {\r\n          return colors[0];\r\n        } else if (val <= breaks[2]) {\r\n          return colors[1];\r\n        } else if (val <= breaks[3]) {\r\n          return colors[2];\r\n        } else if (val <= breaks[4]) {\r\n          return colors[3];\r\n        } else if (val <= breaks[5]) {\r\n          return colors[4];\r\n        }\r\n      };\r\n\r\n    Object.keys(data).forEach(id => {\r\n             const value = _this.sharedState.highlight.length;\r\n              \r\n\t\t\t if (value !== 0 && id < value) {\t\t\t \r\n\t\t\t    \r\n\t\t\t\tstops.push([Number(_this.sharedState.highlight[id]), '#F7E55B']);\r\n\r\n             } else if (value == 0 ) {\r\n               stops.push([data[id].properties.OBJECTID, color(data[id].properties.TOTAL)]);\r\n             }\r\n\t\t\t \r\n\t\t\t \r\n           });\r\n\t\t   \r\n\t  \r\n      let fillColor = {\r\n        property: 'OBJECTID',\r\n        default: 'rgb(242,243,240)',\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      return fillColor;\r\n    },\r\n    getHeight: function () {\r\n      let _this = this;\r\n      const stops = [];\r\n      \r\n\t  let feature = _this.privateState.geoJSON.features;\r\n      let id = 1;  \r\n      let data = feature;\r\n\t  let hbreaks = [3125,6250,12500,25000,50000,200000];\r\n\t  _this.sharedState.breaks = hbreaks;\r\n      let heightAdjust = scaleLinear()\r\n        .domain([\r\n          hbreaks,\r\n          hbreaks[hbreaks.length - 1]\r\n        ])\r\n        .range([0, 200000]);\r\n\r\n      Object.keys(data).forEach(id => {\r\n        const value = data[id].properties.TOTAL;\r\n        if (value !== null) {\r\n          stops.push([data[id].properties.OBJECTID, value/100]);\r\n        }\r\n      });\r\n\t  \r\n      let height = {\r\n        property: 'OBJECTID',\r\n        default: 0,\r\n        type: 'categorical',\r\n        stops: stops\r\n      };\r\n\r\n      return height;\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.initMap();\r\n  }\r\n};\r\n</script>"],"sourceRoot":"src/components"}]}