{"remainingRequest":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\main.js","dependencies":[{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\src\\main.js","mtime":1582689192920},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yz.liu\\Desktop\\Experiment\\COVID2019\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiQzpcXFVzZXJzXFx5ei5saXVcXERlc2t0b3BcXEV4cGVyaW1lbnRcXENPVklEMjAxOVxcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiQzpcXFVzZXJzXFx5ei5saXVcXERlc2t0b3BcXEV4cGVyaW1lbnRcXENPVklEMjAxOVxcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJDOlxcVXNlcnNcXHl6LmxpdVxcRGVza3RvcFxcRXhwZXJpbWVudFxcQ09WSUQyMDE5XFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgIkM6XFxVc2Vyc1xceXoubGl1XFxEZXNrdG9wXFxFeHBlcmltZW50XFxDT1ZJRDIwMTlcXG5vZGVfbW9kdWxlc1xcY29yZS1qc1xcbW9kdWxlc1xcZXMucHJvbWlzZS5maW5hbGx5LmpzIjsKCi8qDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCi8gVGhlIGVtYmVkIEpTIGZpbGUsIHVzaW5nIGJhYmVsIGFuZCBcDQpcIGJyb3dzZXJpZnkuICAgICAgICAgICAgICAgICAgICAgICAvDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICBcICAgXl9fXg0KICAgICAgICBcICAob28pXF9fX19fX18NCiAgICAgICAgICAgKF9fKVwgICAgICAgKVwvXA0KICAgICAgICAgICAgICAgfHwtLS0tdyB8DQogICAgICAgICAgICAgICB8fCAgICAgfHwNCiovCmltcG9ydCAnLi9jc3MvZW1iZWQuY3NzJzsKaW1wb3J0IGdldFVSTFBhcmFtZXRlciBmcm9tICcuL2pzL2dldHVybHBhcmFtcyc7CmltcG9ydCBmZXRjaERhdGEgZnJvbSAnLi9qcy9mZXRjaCc7CmltcG9ydCBkYXRhQ29uZmlnIGZyb20gJy4uL2RhdGEvY29uZmlnL0NPVklELmpzb24nOwppbXBvcnQgbWFwQ29uZmlnIGZyb20gJy4uL2RhdGEvY29uZmlnL21hcC5qc29uJzsKaW1wb3J0IHNpdGVDb25maWcgZnJvbSAnLi4vZGF0YS9jb25maWcvc2l0ZS5qc29uJzsKaW1wb3J0IGNvbG9ycyBmcm9tICcuL2pzL2JyZWFrcyc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFRvQyBmcm9tICcuL2NvbXBvbmVudHMvdG9jLnZ1ZSc7CmltcG9ydCBNYXBHTCBmcm9tICcuL2NvbXBvbmVudHMvbWFwLnZ1ZSc7IC8vaW1wb3J0IG1hcFN0eWxlIGZyb20gJy4vc3R5bGVzL3Bvc2l0cm9uLXNpbmdhcG9yZS5qc29uJzsKLy8gR2V0IFVSTCBhcmd1bWVudHMgaWYgcGFzc2VkCi8vICAgICBtICAgbWV0cmljIG51bWJlcgovLyAgICAgeSAgIHllYXIKLy8gICAgIHMgICBzZWxlY3RlZAovLyAgICAgdCAgIG1hcCB0aXRsZQovLyAgICAgcGl0Y2ggICAgd2hldGhlciBtYXAgY2FuIHBpdGNoIG9yIG5vdCAoZGVmYXVsdCBmYWxzZSkKLy8gICAgIHNtYXh6b29tICBzZXRzIG1heGltdW0gem9vbSBsZXZlbCB3aGVuIGZseWluZyB0byBzZWxlY3RlZCBuZWlnaGJvcmhvb2RzCi8vICAgICB0b2NwIHNldCB3aGV0aGVyIFRPQyBwb3NpdGlvbiBpY29ucyBhcHBlYXIgKGRlZmF1bHQgZmFsc2UpCgp2YXIgcGl0Y2ggPSB0cnVlOwoKaWYgKGdldFVSTFBhcmFtZXRlcigncGl0Y2gnKSA9PT0gJ2ZhbHNlJykgewogIHBpdGNoID0gZmFsc2U7Cn0KCnZhciBzbWF4em9vbSA9IG51bGw7CgppZiAoZ2V0VVJMUGFyYW1ldGVyKCdzbWF4em9vbScpICE9PSBudWxsKSB7CiAgc21heHpvb20gPSBnZXRVUkxQYXJhbWV0ZXIoJ3NtYXh6b29tJyk7Cn0gLy8gZ2V0IHJhbmRvbSBtZXRyaWMgaWYgbm9uZSBwcm92aWRlZCBhbmQgdmFsaWRhdGUgcHJvdmlkZWQKCgp2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGFDb25maWcpOwp2YXIgbWV0cmljSWQgPSAxOwoKaWYgKGdldFVSTFBhcmFtZXRlcignbScpKSB7CiAgdmFyIHBhc3NlZE1ldHJpYyA9IGdldFVSTFBhcmFtZXRlcignbScpOwoKICBpZiAoa2V5cy5pbmRleE9mKCJtIi5jb25jYXQocGFzc2VkTWV0cmljKSkgIT09IC0xKSB7CiAgICBtZXRyaWNJZCA9IHBhc3NlZE1ldHJpYzsKICB9Cn0KCnZhciB5ZWFyID0gMjAxNjsKCmlmIChnZXRVUkxQYXJhbWV0ZXIoJ3knKSAhPT0gbnVsbCkgewogIHllYXIgPSBnZXRVUkxQYXJhbWV0ZXIoJ3knKTsKfQoKdmFyIHNlbGVjdGVkID0gW107CgppZiAoZ2V0VVJMUGFyYW1ldGVyKCdzJykgIT09IG51bGwpIHsKICBzZWxlY3RlZCA9IGdldFVSTFBhcmFtZXRlcigncycpLnNwbGl0KCcsJyk7Cn0KCnZhciBtYXBUaXRsZSA9IG51bGw7CgppZiAoZ2V0VVJMUGFyYW1ldGVyKCd0JykgIT09IG51bGwpIHsKICBtYXBUaXRsZSA9IGdldFVSTFBhcmFtZXRlcigndCcpOwp9IGVsc2UgaWYgKGRhdGFDb25maWdbIm0iLmNvbmNhdChtZXRyaWNJZCldKSB7CiAgbWFwVGl0bGUgPSBkYXRhQ29uZmlnWyJtIi5jb25jYXQobWV0cmljSWQpXS5kYXRlOwp9Cgp2YXIgdG9jcCA9IGZhbHNlOwoKaWYgKGdldFVSTFBhcmFtZXRlcigndG9jcCcpID09PSAndHJ1ZScpIHsKICB0b2NwID0gdHJ1ZTsKfSAvLyB0aGUgc2hhcmVkIHN0YXRlIGJldHdlZW4gY29tcG9uZW50cwoKCnZhciBhcHBTdGF0ZSA9IHsKICBtZXRyaWM6IHsKICAgIGNvbmZpZzogbnVsbCwKICAgIHllYXJzOiBbXSwKICAgIGRhdGE6IG51bGwKICB9LAogIGNvbG9yczogY29sb3JzLmJyZWFrc0duQnU1LAogIGJyZWFrczogbnVsbCwKICBzZWxlY3RlZDogc2VsZWN0ZWQsCiAgeWVhcjogeWVhciwKICBtZXRhZGF0YTogbnVsbCwKICB0aXRsZTogbWFwVGl0bGUsCiAgaGlnaGxpZ2h0OiBbXQp9OyAvLyBmb3IgZGVidWdnaW5nCgp3aW5kb3cuYXBwU3RhdGUgPSBhcHBTdGF0ZTsgLy8gcGFyZW50L2lmcmFtZSBjb21tdW5pY2F0aW9ucwoKd2luZG93Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgaWYgKGUuZGF0YS50aXRsZSkgewogICAgYXBwU3RhdGUudGl0bGUgPSBlLmRhdGEudGl0bGU7CiAgfQoKICBpZiAoZS5kYXRhLm1ldHJpYykgewogICAgYXBwU3RhdGUudGl0bGUgPSBkYXRhQ29uZmlnWyIiLmNvbmNhdChlLmRhdGEubWV0cmljKV0uZGF0ZTsKICAgIGZldGNoRGF0YShhcHBTdGF0ZSwgZS5kYXRhLm1ldHJpYyk7CiAgICBwYXJlbnQucG9zdE1lc3NhZ2UoewogICAgICBtYXB0aXRsZTogYXBwU3RhdGUudGl0bGUKICAgIH0sICcqJyk7CiAgfQp9OwoKaWYgKHdpbmRvdyAhPSB3aW5kb3cudG9wKSB7CiAgcGFyZW50LnBvc3RNZXNzYWdlKHsKICAgIG1hcHRpdGxlOiBtYXBUaXRsZQogIH0sICcqJyk7Cn0gLy8gZ3JhYiBpbml0aWFsIGRhdGEKCgpmZXRjaERhdGEoYXBwU3RhdGUsIG1ldHJpY0lkKTsgLy8gc2V0IHVwIHZ1ZSBjb21wb25lbnRzCgpUb0MuZGF0YSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gewogICAgc2hhcmVkU3RhdGU6IGFwcFN0YXRlLAogICAgcHJpdmF0ZVN0YXRlOiB7CiAgICAgIG1ldGFEZXNjOiBudWxsLAogICAgICBzZWxlY3RlZDogbnVsbCwKICAgICAgYXJlYTogbnVsbCwKICAgICAgc2VsZWN0ZWRSYXc6IG51bGwsCiAgICAgIGFyZWFSYXc6IG51bGwsCiAgICAgIHBvc2l0aW9uVG9nZ2xlOiB0b2NwCiAgICB9CiAgfTsKfTsKCk1hcEdMLmRhdGEgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHsKICAgIHNoYXJlZFN0YXRlOiBhcHBTdGF0ZSwKICAgIHByaXZhdGVTdGF0ZTogewogICAgICBsb2NhdGU6IG51bGwsCiAgICAgIG1hcE9wdGlvbnM6IHsKICAgICAgICBjb250YWluZXI6ICdtYXAnLAogICAgICAgIHN0eWxlOiAnaHR0cHM6Ly9hcGkubWFwdGlsZXIuY29tL21hcHMvcG9zaXRyb24vc3R5bGUuanNvbj9rZXk9S0R2ZGlLSFhLVDk4V3NPMjNiTmwnLAogICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2UsCiAgICAgICAgem9vbTogbWFwQ29uZmlnLnpvb21FbWJlZCwKICAgICAgICBjZW50ZXI6IG1hcENvbmZpZy5jZW50ZXJFbWJlZCwKICAgICAgICBtYXhCb3VuZHM6IG1hcENvbmZpZy5tYXhCb3VuZHMsCiAgICAgICAgbWluWm9vbTogbWFwQ29uZmlnLm1pblpvb20sCiAgICAgICAgLy9wcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IG1hcENvbmZpZy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIKICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWUKICAgICAgfSwKICAgICAgcGl0Y2g6IHBpdGNoLAogICAgICBzbWF4em9vbTogc21heHpvb20sCiAgICAgIG1hcExvYWRlZDogZmFsc2UsCiAgICAgIG1ldHJpY0lkOiBudWxsLAogICAgICBnZW9KU09OOiBudWxsCiAgICB9CiAgfTsKfTsKCm5ldyBWdWUoewogIGVsOiAnc2MtdG9jJywKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICByZXR1cm4gaChUb0MpOwogIH0KfSk7Cm5ldyBWdWUoewogIGVsOiAnc2MtbWFwJywKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICByZXR1cm4gaChNYXBHTCk7CiAgfQp9KTsgLy8gYXR0cmlidXRpb24gbGluawoKaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdHRyaWJ1dGlvbiBhJykpIHsKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXR0cmlidXRpb24gYScpLmhyZWYgPSAiIi5jb25jYXQoc2l0ZUNvbmZpZy5xb2xkYXNoYm9hcmRVUkwsICI/bT1tIikuY29uY2F0KG1ldHJpY0lkLCAiJm49IikuY29uY2F0KHNlbGVjdGVkLmpvaW4oJywnKSk7Cn0="},{"version":3,"sources":["C:/Users/yz.liu/Desktop/Experiment/COVID2019/src/main.js"],"names":["getURLParameter","fetchData","dataConfig","mapConfig","siteConfig","colors","Vue","ToC","MapGL","pitch","smaxzoom","keys","Object","metricId","passedMetric","indexOf","year","selected","split","mapTitle","date","tocp","appState","metric","config","years","data","breaksGnBu5","breaks","metadata","title","highlight","window","onmessage","e","parent","postMessage","maptitle","top","sharedState","privateState","metaDesc","area","selectedRaw","areaRaw","positionToggle","locate","mapOptions","container","style","attributionControl","zoom","zoomEmbed","center","centerEmbed","maxBounds","minZoom","preserveDrawingBuffer","mapLoaded","geoJSON","el","render","h","document","querySelector","href","qoldashboardURL","join"],"mappings":"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","sourcesContent":["/*\r\n____________________________________\r\n/ The embed JS file, using babel and \\\r\n\\ browserify.                       /\r\n------------------------------------\r\n       \\   ^__^\r\n        \\  (oo)\\_______\r\n           (__)\\       )\\/\\\r\n               ||----w |\r\n               ||     ||\r\n*/\r\n\r\nimport './css/embed.css';\r\nimport getURLParameter from './js/geturlparams';\r\nimport fetchData from './js/fetch';\r\nimport dataConfig from '../data/config/COVID.json';\r\nimport mapConfig from '../data/config/map.json';\r\nimport siteConfig from '../data/config/site.json';\r\nimport colors from './js/breaks';\r\nimport Vue from 'vue';\r\nimport ToC from './components/toc.vue';\r\nimport MapGL from './components/map.vue';\r\n\r\n//import mapStyle from './styles/positron-singapore.json';\r\n\r\n// Get URL arguments if passed\r\n//     m   metric number\r\n//     y   year\r\n//     s   selected\r\n//     t   map title\r\n//     pitch    whether map can pitch or not (default false)\r\n//     smaxzoom  sets maximum zoom level when flying to selected neighborhoods\r\n//     tocp set whether TOC position icons appear (default false)\r\n\r\nlet pitch = true;\r\nif (getURLParameter('pitch') === 'false') {\r\n  pitch = false;\r\n}\r\nlet smaxzoom = null;\r\nif (getURLParameter('smaxzoom') !== null) {\r\n  smaxzoom = getURLParameter('smaxzoom');\r\n}\r\n// get random metric if none provided and validate provided\r\nlet keys = Object.keys(dataConfig);\r\nlet metricId = 1;\r\nif (getURLParameter('m')) {\r\n  let passedMetric = getURLParameter('m');\r\n  if (keys.indexOf(`m${passedMetric}`) !== -1) {\r\n    metricId = passedMetric;\r\n  }\r\n}\r\nlet year = 2016;\r\nif (getURLParameter('y') !== null) {\r\n  year = getURLParameter('y');\r\n}\r\nlet selected = [];\r\nif (getURLParameter('s') !== null) {\r\n  selected = getURLParameter('s').split(',');\r\n}\r\nlet mapTitle = null;\r\nif (getURLParameter('t') !== null) {\r\n  mapTitle = getURLParameter('t');\r\n} else if (dataConfig[`m${metricId}`]) {\r\n  mapTitle = dataConfig[`m${metricId}`].date;\r\n}\r\nlet tocp = false;\r\nif (getURLParameter('tocp') === 'true') {\r\n  tocp = true;\r\n}\r\n\r\n// the shared state between components\r\nlet appState = {\r\n  metric: {\r\n    config: null,\r\n    years: [],\r\n    data: null\r\n  },\r\n  colors: colors.breaksGnBu5,\r\n  breaks: null,\r\n  selected: selected,\r\n  year: year,\r\n  metadata: null,\r\n  title: mapTitle,\r\n  highlight: []\r\n};\r\n\r\n// for debugging\r\nwindow.appState = appState;\r\n\r\n// parent/iframe communications\r\nwindow.onmessage = function(e) {\r\n  if (e.data.title) {\r\n    appState.title = e.data.title;\r\n  }\r\n  if (e.data.metric) {\r\n    appState.title = dataConfig[`${e.data.metric}`].date;\r\n    fetchData(appState, e.data.metric);\r\n    parent.postMessage(\r\n      {\r\n        maptitle: appState.title\r\n      },\r\n      '*'\r\n    );\r\n  }\r\n};\r\nif (window != window.top) {\r\n  parent.postMessage(\r\n    {\r\n      maptitle: mapTitle\r\n    },\r\n    '*'\r\n  );\r\n}\r\n\r\n// grab initial data\r\nfetchData(appState, metricId);\r\n\r\n// set up vue components\r\nToC.data = function() {\r\n  return {\r\n    sharedState: appState,\r\n    privateState: {\r\n      metaDesc: null,\r\n      selected: null,\r\n      area: null,\r\n      selectedRaw: null,\r\n      areaRaw: null,\r\n      positionToggle: tocp\r\n    }\r\n  };\r\n};\r\n\r\nMapGL.data = function() {\r\n  return {\r\n    sharedState: appState,\r\n    privateState: {\r\n      locate: null,\r\n      mapOptions: {\r\n        container: 'map',\r\n        style: 'https://api.maptiler.com/maps/positron/style.json?key=KDvdiKHXKT98WsO23bNl',\r\n        attributionControl: false,\r\n        zoom: mapConfig.zoomEmbed,\r\n        center: mapConfig.centerEmbed,\r\n        maxBounds: mapConfig.maxBounds,\r\n        minZoom: mapConfig.minZoom,\r\n        //preserveDrawingBuffer: mapConfig.preserveDrawingBuffer\r\n        preserveDrawingBuffer: true\r\n      },\r\n      pitch: pitch,\r\n      smaxzoom: smaxzoom,\r\n      mapLoaded: false,\r\n      metricId: null,\r\n      geoJSON: null\r\n    }\r\n  };\r\n};\r\n\r\nnew Vue({\r\n  el: 'sc-toc',\r\n  render: h => h(ToC)\r\n});\r\nnew Vue({\r\n  el: 'sc-map',\r\n  render: h => h(MapGL)\r\n});\r\n\r\n// attribution link\r\nif (document.querySelector('.attribution a')) {\r\n  document.querySelector('.attribution a').href = `${\r\n    siteConfig.qoldashboardURL\r\n  }?m=m${metricId}&n=${selected.join(',')}`;\r\n}"]}]}