{"version":3,"sources":["webpack:///src/css/modules/toc.css","webpack:///src/css/embed.css","embed.85cdf276.css","webpack:///src/components/src/components/toc.vue"],"names":[],"mappings":"AACA,SACI,QAAU,CACb,AACD,YACI,WAAa,CAChB,AACD,UACI,SAAW,CACd,AACD,WACI,UAAY,CACf,AACD,KAGI,gBAAkB,AAFlB,kBAAmB,AACnB,WAAa,CAEhB,AAED,aAII,eAAiB,AAHjB,kBAAmB,AAEnB,QAAS,AADT,MAAO,AAGP,UAAY,CACf,AACD,eACI,WAAY,AACZ,WAAa,AACb,sBAAyB,CAC5B,AACD,qBACI,UAAa,CAChB,AACD,mBAGI,UAAW,AADX,YAAa,AADb,UAAY,CAGf,AAED,yCACE,kBAAmB,AACnB,UAAY,CACb,AAED,aAGI,aAAc,AACd,qBAAsB,AAHtB,mBAAoB,AACpB,iBAAmB,CAGtB,AACD,WAGI,cAAe,AADf,eAAgB,AADhB,SAAW,CAId,AACD,gBACI,cAAe,AACf,cAAgB,CACnB,AACD,YAGI,cAAe,AADf,eAAgB,AADhB,eAAkB,CAGrB,AACD,aAGI,yBAA2B,AAD3B,gBAAkB,AADlB,YAAc,CAGjB,AACD,uBACI,wBAA2B,CAC9B,AACD,aACI,iBAAmB,CACtB,AAED,OAEE,wCAA0C,AAE1C,eAAgB,AAHhB,sBAAuB,AAEvB,oBAAsB,CAEvB,AAED,aAEI,eAAgB,AADhB,qBAAsB,AAEtB,iBAAmB,CACtB,AAED,MAEI,mBAAoB,AADpB,QAAU,CAEb,AACD,GACI,gBAAkB,AAClB,gBAAkB,CACrB,AAED,GACI,eAAoB,CACvB,AAED,IACI,cAAe,AAEf,YAAa,AACb,gBAAiB,AAFjB,UAAY,CAIf,AAED,YACI,8BAAiC,AACjC,eAAgB,AAChB,iBAAmB,AACnB,iBAAiB,AACjB,iBAAiB,AACjB,kBAAkB,AAClB,mBAAmB,AACnB,cAAiB,CACpB,AAED,0BACI,iBAAiB,AACjB,iBAAkB,CACrB,AACD,yBACI,eAAe,AACf,eAAgB,CACnB,AAED,sBACI,YAAc,CACjB,AAED,aACI,sBACI,cAAe,AAEf,WAAY,AAEZ,OAAQ,AADR,kBAAkB,AAElB,MAAO,AAJP,UAAW,CAKd,AACD,aACI,YAAc,CACjB,CACJ,AAED,yBACI,YACI,sBAAyB,CAC5B,AACD,KACI,WAAa,CAChB,CACJ,AChJD,EACI,qBAAuB,CAC1B,AAED,KACI,6BAAkC,CACrC,AAED,UAYI,kCAAmC,AADnC,mCAAoC,AAFpC,WAAY,AACZ,qEAAgF,AAPhF,YAAa,AAUb,qBAAuB,AATvB,gBAAiB,AAFjB,UAAY,CAGf,AAWD,WAGI,SAAU,AACV,OAAQ,AAHR,kBAAmB,AAInB,QAAS,AAHT,KAAO,CAIV,AAED,KAGI,sBAAuB,AADvB,YAAa,AADb,UAAY,CAGf,AAED,aAOI,8BAAqC,AALrC,WAAY,AAEZ,eAAiB,AAEjB,YAAa,AALb,kBAAmB,AAEnB,UAAW,AAEX,gBAAkB,CAGrB,AAED,aACI,KACI,qBAAwB,CAC3B,AACD,6BAEI,UAAY,CACf,CC8JJ,ACwCD,OAEA,iBAAA,AADA,eAAA,CAEA","file":"embed.85cdf276.css","sourcesContent":["\r\n#toc.top {\r\n    top: -1px;\r\n}\r\n#toc.bottom {\r\n    bottom: -1px;\r\n}\r\n#toc.left {\r\n    left: -1px;\r\n}\r\n#toc.right {\r\n    right: -1px;\r\n}\r\n#toc {\r\n    position: absolute;\r\n    width: 260px;\r\n    background: white;    \r\n}\r\n\r\n.tocposition {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    font-size: 0.8em;\r\n    z-index: 20;\r\n}\r\n.tocposition a {\r\n    color: #333;\r\n    opacity: 0.2;\r\n    transition: opacity 0.5s;\r\n}\r\n.tocposition a:hover {\r\n    opacity: 0.8;\r\n}\r\n.tocposition .icon {\r\n    width: 14px;\r\n    height: 14px;\r\n    fill: #ccc;\r\n}\r\n\r\n.title, .description, .legend, .metricboxes {\r\n  position: relative;\r\n  z-index: 10;\r\n}\r\n\r\n.metricboxes {\r\n    padding: 3px 0 10px;\r\n    text-align: center;\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n}\r\n.metricbox {\r\n    width: 50%;\r\n    padding: 0 10px;\r\n    margin: 0 auto;\r\n\r\n}\r\n.metricbox span {\r\n    display: block;\r\n    font-size: 12px;\r\n}\r\n.metrictype {\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    color: #727272;\r\n}\r\n.metricvalue {\r\n    margin-top: 0;\r\n    font-weight: bold;\r\n    font-size: 16px !important;\r\n}\r\n.metricvalue.metricraw {\r\n    font-size: 13px !important;\r\n}\r\n.metriclabel {\r\n    line-height: 1.3em;\r\n}\r\n\r\n.title {\r\n  padding: 10px 10px 7px;\r\n  border-bottom: 1px solid rgba(0,0,0,0.15);\r\n  word-wrap: break-word;\r\n  font-size: 15px;\r\n}\r\n\r\n.description {\r\n    padding: 3px 10px 2px;\r\n    font-size: 12px;\r\n    text-align: center;\r\n}\r\n\r\nh1, h2 {\r\n    margin: 0;\r\n    line-height: normal;\r\n}\r\nh1 {\r\n    font-weight: bold;\r\n    line-height: 20px;\r\n}\r\n\r\nh2 {\r\n    font-weight: normal;\r\n}\r\n\r\nsvg {\r\n    display: block;\r\n    width: 100%;\r\n    height: auto;\r\n    max-height: 41px;\r\n    /*pointer-events: none;*/ /* fix for ie11 click making legend disappear */\r\n}\r\n\r\n.legendText {\r\n    font-family:'Roboto', sans-serif;\r\n    font-size: 10px;\r\n    letter-spacing:0px;\r\n    line-height:100%;\r\n    stroke-width:1px;\r\n    text-align:center;\r\n    text-anchor:middle;\r\n    word-spacing:0px;\r\n}\r\n\r\n.legendText:first-of-type {\r\n    text-align:start;\r\n    text-anchor:start;\r\n}\r\n.legendText:last-of-type {\r\n    text-align:end;\r\n    text-anchor:end;\r\n}\r\n\r\n.background-print-img{\r\n    display: none;\r\n}\r\n\r\n@media print{\r\n    .background-print-img{\r\n        display: block;\r\n        width:100%;\r\n        height: 99%;\r\n        position:absolute;\r\n        left: 0;\r\n        top: 0;\r\n    }\r\n    .tocposition {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media all and (max-width: 480px) {\r\n    .metric-raw {\r\n        display: none !important;\r\n    }\r\n    #toc {\r\n        width: 200px;\r\n    }\r\n}\r\n\r\n","/*\r\n____________________________________\r\n/ Embed CSS file, using PostCSS     \\\r\n------------------------------------\r\n       \\   ^__^\r\n        \\  (oo)\\_______\r\n           (__)\\       )\\/\\\r\n               ||----w |\r\n               ||     ||\r\n*/\r\n\r\n@import '../../node_modules/mapbox-gl/dist/mapbox-gl.css';\r\n@import './modules/toc.css';\r\n* {\r\n    box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n    font-family: 'Roboto', sans-serif;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    color: #555;\r\n    font-family: \"Helvetica Neue\", \"Calibri\", \"Liberation Sans\", Roboto, sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    letter-spacing: 0.02em;\r\n}\r\n\r\n.container {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n}\r\n\r\n#map {\r\n    width: 100%;\r\n    height: 100%;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n.attribution {\r\n    position: absolute;\r\n    bottom: 5px;\r\n    right: 5px;\r\n    font-size: 0.8em;\r\n    text-align: right;\r\n    padding: 3px;\r\n    background: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n@media print {\r\n    #map {\r\n        border: 1px solid black;\r\n    }\r\n    a:link:after,\r\n    a:visited:after {\r\n        content: \"\";\r\n    }\r\n}","\r\n#toc.top {\r\n    top: -1px;\r\n}\r\n#toc.bottom {\r\n    bottom: -1px;\r\n}\r\n#toc.left {\r\n    left: -1px;\r\n}\r\n#toc.right {\r\n    right: -1px;\r\n}\r\n#toc {\r\n    position: absolute;\r\n    width: 260px;\r\n    background: white;    \r\n}\r\n\r\n.tocposition {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    font-size: 0.8em;\r\n    z-index: 20;\r\n}\r\n.tocposition a {\r\n    color: #333;\r\n    opacity: 0.2;\r\n    transition: opacity 0.5s;\r\n}\r\n.tocposition a:hover {\r\n    opacity: 0.8;\r\n}\r\n.tocposition .icon {\r\n    width: 14px;\r\n    height: 14px;\r\n    fill: #ccc;\r\n}\r\n\r\n.title, .description, .legend, .metricboxes {\r\n  position: relative;\r\n  z-index: 10;\r\n}\r\n\r\n.metricboxes {\r\n    padding: 3px 0 10px;\r\n    text-align: center;\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n}\r\n.metricbox {\r\n    width: 50%;\r\n    padding: 0 10px;\r\n    margin: 0 auto;\r\n\r\n}\r\n.metricbox span {\r\n    display: block;\r\n    font-size: 12px;\r\n}\r\n.metrictype {\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    color: #727272;\r\n}\r\n.metricvalue {\r\n    margin-top: 0;\r\n    font-weight: bold;\r\n    font-size: 16px !important;\r\n}\r\n.metricvalue.metricraw {\r\n    font-size: 13px !important;\r\n}\r\n.metriclabel {\r\n    line-height: 1.3em;\r\n}\r\n\r\n.title {\r\n  padding: 10px 10px 7px;\r\n  border-bottom: 1px solid rgba(0,0,0,0.15);\r\n  word-wrap: break-word;\r\n  font-size: 15px;\r\n}\r\n\r\n.description {\r\n    padding: 3px 10px 2px;\r\n    font-size: 12px;\r\n    text-align: center;\r\n}\r\n\r\nh1, h2 {\r\n    margin: 0;\r\n    line-height: normal;\r\n}\r\nh1 {\r\n    font-weight: bold;\r\n    line-height: 20px;\r\n}\r\n\r\nh2 {\r\n    font-weight: normal;\r\n}\r\n\r\nsvg {\r\n    display: block;\r\n    width: 100%;\r\n    height: auto;\r\n    max-height: 41px;\r\n    /*pointer-events: none;*/ /* fix for ie11 click making legend disappear */\r\n}\r\n\r\n.legendText {\r\n    font-family:'Roboto', sans-serif;\r\n    font-size: 10px;\r\n    letter-spacing:0px;\r\n    line-height:100%;\r\n    stroke-width:1px;\r\n    text-align:center;\r\n    text-anchor:middle;\r\n    word-spacing:0px;\r\n}\r\n\r\n.legendText:first-of-type {\r\n    text-align:start;\r\n    text-anchor:start;\r\n}\r\n.legendText:last-of-type {\r\n    text-align:end;\r\n    text-anchor:end;\r\n}\r\n\r\n.background-print-img{\r\n    display: none;\r\n}\r\n\r\n@media print{\r\n    .background-print-img{\r\n        display: block;\r\n        width:100%;\r\n        height: 99%;\r\n        position:absolute;\r\n        left: 0;\r\n        top: 0;\r\n    }\r\n    .tocposition {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media all and (max-width: 480px) {\r\n    .metric-raw {\r\n        display: none !important;\r\n    }\r\n    #toc {\r\n        width: 200px;\r\n    }\r\n}\r\n\r\n\n/*\r\n____________________________________\r\n/ Embed CSS file, using PostCSS     \\\r\n------------------------------------\r\n       \\   ^__^\r\n        \\  (oo)\\_______\r\n           (__)\\       )\\/\\\r\n               ||----w |\r\n               ||     ||\r\n*/\r\n* {\r\n    box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n    font-family: 'Roboto', sans-serif;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    color: #555;\r\n    font-family: \"Helvetica Neue\", \"Calibri\", \"Liberation Sans\", Roboto, sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    letter-spacing: 0.02em;\r\n}\r\n\r\n.container {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n}\r\n\r\n#map {\r\n    width: 100%;\r\n    height: 100%;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n.attribution {\r\n    position: absolute;\r\n    bottom: 5px;\r\n    right: 5px;\r\n    font-size: 0.8em;\r\n    text-align: right;\r\n    padding: 3px;\r\n    background: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n@media print {\r\n    #map {\r\n        border: 1px solid black;\r\n    }\r\n    a:link:after,\r\n    a:visited:after {\r\n        content: \"\";\r\n    }\r\n}\n\n.small {\n  max-width: 400px;\n  margin:  10px auto;\n}\n\n\n/*# sourceMappingURL=embed.85cdf276.css.map*/","<template>\r\n    <div id=\"toc\" v-if=\"sharedState.metric.config\" class=\"top left\">\r\n        <div>\r\n            <img src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=\" class=\"background-print-img\" alt=\"white background for printing\">\r\n            <div class=\"tocposition\">\r\n                <a href=\"javascript:void(0)\" title=\"Move Table of Contents\" v-on:click=\"position()\"><svg class=\"icon\"><use xlink:href=\"#icon-zoom_out_map\"></use></svg></a>\r\n            </div>\r\n            <h1 class=\"title\">COVID 2019 in Singaproe</h1>\r\n            <h2 class=\"description\">\r\n                 <span class=\"metrictype\">DORSCON Level : Orange</span>\r\n            </h2>\r\n\t\t\t<h2 class=\"description\">\r\n\t\t\t\t <span class=\"metrictype\">Confirmed Case TOTAL: {{ sharedState.metric.config.length }}</span>\r\n            </h2>\r\n\t\t\t<div class=\"small\">\r\n\t\t\t\t<line-chart :chart-data=\"datacollection\"/>\r\n\t\t\t\t<!-- <button @click=\"fillData()\">Randomize</button> -->\r\n\t\t\t</div>\r\n            <!-- <div class=\"metricboxes\">\r\n                <div class=\"metricbox\" v-if=\"sharedState.metric.config.length > 0\">\r\n                    <span class=\"metricvalue\">{{ privateState.metric.config.length }}</span>\r\n                    <span class=\"metricvalue\">{{ privateState.metric.config.date }}</span> \r\n                    <span v-if=\"sharedState.metric.config.length > 0\" class=\"metriclabel\">{{ sharedState.metric.config.date }}</span> \r\n                    <span v-if=\"sharedState.selected.length > 0\" class=\"metric-raw\">\r\n                        <span>or</span>\r\n                        <span class=\"metricvalue metricraw\">{{privateState.metric.config.date}}</span>\r\n                        <span v-html=\"sharedState.metric.config.date.toLowerCase()\" class=\"metriclabel\"></span>\r\n                    </span> \r\n                </div> -->\r\n\t\t\t<h1 class=\"title\">Singaproe Resident Population, 2016</h1>\r\n                <!-- <div class=\"metricbox\">\r\n                    <span class=\"metrictype\">Singaproe Resident Population, 2016</span>\r\n                    <span class=\"metricvalue\">{{ privateState.area }}</span>\r\n                    <span v-if=\"sharedState.metric.config.label\" class=\"metriclabel\">{{ sharedState.metric.config.label.toLowerCase() }}</span>\r\n                    <span v-if=\"sharedState.metric.config.raw_label\" class=\"metric-raw\">\r\n                        <span>or</span>\r\n                        <span class=\"metricvalue metricraw\">{{privateState.areaRaw}}</span>\r\n                        <span v-html=\"sharedState.metric.config.raw_label.toLowerCase()\" class=\"metriclabel\"></span>\r\n                    </span> \r\n                </div> -->\r\n            </div>\r\n            <div class=\"legend\">\r\n                <svg  v-if=\"sharedState.breaks\" xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 248.4 39.2\" id=\"maplegend\" role=\"img\" aria-labelledby=\"svgTitle\">\r\n                    <title id=\"svgTitle\">Choropleth legend</title>\r\n                    <g transform=\"translate(20.714293 -851.75475)\">\r\n                        <rect y=\"865.9\" x=\"-20.7\" height=\"25\" width=\"50\" v-bind:style=\"{fill: this.sharedState.colors[0]}\" v-on:click=\"selectBreak(0)\" v-on:mouseover=\"highlight(0)\" v-on:mouseout=\"highlight(-1)\"  />\r\n                        <rect width=\"50\" height=\"25\" x=\"28.9\" y=\"865.9\" v-bind:style=\"{fill: this.sharedState.colors[1]}\" v-on:click=\"selectBreak(1)\" v-on:mouseover=\"highlight(1)\" v-on:mouseout=\"highlight(-1)\" />\r\n                        <rect width=\"50\" height=\"25\" x=\"78.5\" y=\"865.9\" v-bind:style=\"{fill: this.sharedState.colors[2]}\" v-on:click=\"selectBreak(2)\" v-on:mouseover=\"highlight(2)\" v-on:mouseout=\"highlight(-1)\" />\r\n                        <rect y=\"865.9\" x=\"128.1\" height=\"25\" width=\"50\" v-bind:style=\"{fill: this.sharedState.colors[3]}\" v-on:click=\"selectBreak(3)\" v-on:mouseover=\"highlight(3)\" v-on:mouseout=\"highlight(-1)\" />\r\n                        <rect width=\"50\" height=\"25\" x=\"177.6\" y=\"865.9\" v-bind:style=\"{fill: this.sharedState.colors[4]}\" v-on:click=\"selectBreak(4)\" v-on:mouseover=\"highlight(4)\" v-on:mouseout=\"highlight(-1)\" />\r\n                        <text x=\"-19.5\" y=\"864.3\" class=\"legendText\">\r\n                          <tspan x=\"-19.5\" y=\"864.3\">{{ abbrNumber(sharedState.breaks[0]) }}</tspan>\r\n                        </text>\r\n                        <text y=\"864.4\" x=\"28.6\" class=\"legendText\">\r\n                          <tspan y=\"864.4\" x=\"28.6\">{{ abbrNumber(sharedState.breaks[1]) }}</tspan>\r\n                        </text>\r\n                        <text x=\"78.4\" y=\"864.4\" class=\"legendText\">\r\n                          <tspan x=\"78.4\" y=\"864.4\">{{ abbrNumber(sharedState.breaks[2]) }}</tspan>\r\n                        </text>\r\n                        <text y=\"864.4\" x=\"128\" class=\"legendText\">\r\n                          <tspan y=\"864.4\" x=\"128\">{{ abbrNumber(sharedState.breaks[3]) }}</tspan>\r\n                        </text>\r\n                        <text x=\"177.8\" y=\"864.4\" class=\"legendText\">\r\n                          <tspan x=\"177.8\" y=\"864.4\">{{ abbrNumber(sharedState.breaks[4]) }}</tspan>\r\n                        </text>\r\n                        <text y=\"864.3\" x=\"225.8\" class=\"legendText\">\r\n                          <tspan y=\"864.3\" x=\"225.8\">{{ abbrNumber(sharedState.breaks[5]) }}</tspan>\r\n                        </text>\r\n                    </g>\r\n                </svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    abbrNum,\r\n    round,\r\n    prettyNumber\r\n} from '../js/number_format';\r\nimport {\r\n    metaDescription\r\n} from '../js/meta';\r\nimport isNumeric from '../js/isnumeric';\r\nimport {\r\n    calcValue,\r\n    wValsToArray,\r\n    sum\r\n} from '../js/metric_calculations';\r\n\r\nimport LineChart from '../js/LineChart.js'\r\nimport virousdata from '../../data/config/COVID.json';\r\n\r\nexport default {\r\n    name: 'sc-toc',\r\n\tcomponents: {\r\n      LineChart\r\n    },\r\n    data () {\r\n      return {\r\n        datacollection: null\r\n      }\r\n    },\r\n\tmounted () {\r\n      this.fillData()\r\n    },\r\n    watch: {\r\n        'sharedState.metric': 'processData',\r\n        'sharedState.metadata': 'getMetaDesc',\r\n        'sharedState.selected': 'processSelected',\r\n        'sharedState.year': 'processYear'\r\n    },\r\n    methods: {\r\n        highlight: function (n) {\r\n            if (n === -1) {\r\n                this.sharedState.highlight = [];\r\n            } else {\r\n                this.sharedState.highlight = this.getBreakIds(n);\r\n            }\r\n        },\r\n        selectBreak: function (n) {\r\n            //this.sharedState.selected = this.getBreakIds(n);\r\n        },\r\n        getBreakIds: function (n) {\r\n            let _this = this;\r\n            let data = _this.sharedState.metric.data.features;\r\n            let breaks = _this.sharedState.breaks;\r\n            let ids = [];\r\n            \r\n\t\t\t// loop through data to get id's\r\n            Object.keys(data).forEach(id => {\r\n                const value = data[id].properties.TOTAL;\r\n\r\n                if (value !== null && value >= breaks[n] && value <= breaks[n + 1]) {\r\n                    ids.push(data[id].properties.OBJECTID.toString());\r\n                }\r\n            });\r\n\r\n            return ids;\r\n        },\r\n\r\n        abbrNumber: function (value) {\r\n            let num = abbrNum(value, 1);\r\n            if (isNumeric(num)) {\r\n                return round(num, this.sharedState.metric.config.decimals);\r\n            } else {\r\n                return num;\r\n            }\r\n        },\r\n        getMetaDesc: function () {\r\n            this.privateState.metaDesc = metaDescription(this.sharedState.metadata).replace('<p>', '').replace('</p>', '').trim();\r\n        },\r\n        processData: function () {\r\n            this.processArea();\r\n            this.processSelected();\r\n        },\r\n        processSelected: function () {\r\n            let metric = this.sharedState.metric;\r\n\r\n            let selectedValue = calcValue(metric.data, metric.config.type, this.sharedState.year, this.sharedState.selected);\r\n            this.privateState.selected = prettyNumber(selectedValue, metric.config.decimals, metric.config.prefix, metric.config.suffix);\r\n            if (metric.config.raw_label) {\r\n                let rawArray = wValsToArray(metric.data.map, metric.data.w, [this.sharedState.year], this.sharedState.selected);\r\n                let rawValue = sum(rawArray);\r\n                this.privateState.selectedRaw = prettyNumber(rawValue, 0);\r\n            }\r\n        },\r\n        processArea: function () {\r\n            //let metric = this.sharedState.metric;\r\n            //let keys = Object.keys(metric.data.map);\r\n            //if (metric.config.world_val && metric.config.world_val[`y_${this.sharedState.year}`]) {\r\n            //    this.privateState.area = prettyNumber(metric.config.world_val[`y_${this.sharedState.year}`], metric.config.decimals, metric.config.prefix, metric.config.suffix);\r\n            //} else {\r\n            //    let areaValue = calcValue(metric.data, metric.config.type, this.sharedState.year, keys);\r\n            //    this.privateState.area = prettyNumber(areaValue, metric.config.decimals, metric.config.prefix, metric.config.suffix);\r\n            //}\r\n            //if (metric.config.raw_label) {\r\n            //    let rawArray = wValsToArray(metric.data.map, metric.data.w, [this.sharedState.year], keys);\r\n            //    let rawValue = sum(rawArray);\r\n            //    this.privateState.areaRaw = prettyNumber(rawValue, 0);\r\n            //}\r\n        },\r\n        processYear: function () {\r\n            this.processArea();\r\n            this.processSelected();\r\n        },\r\n        position: function () {\r\n            let el = document.querySelector(\"#toc\");\r\n\r\n            // move to top left from bottom right\r\n            if (el.classList.contains(\"right\")) {\r\n                el.classList.remove('bottom');\r\n                el.classList.remove('right');\r\n                el.classList.add('top');\r\n                el.classList.add('left');\r\n            }\r\n            // move to bottom right from bottom left\r\n            else if (el.classList.contains(\"bottom\")) {\r\n                el.classList.remove('left');\r\n                el.classList.add('right');\r\n            }\r\n            // move to bottom left from top left\r\n            else if (el.classList.contains(\"top\")) {\r\n                el.classList.remove('top');\r\n                el.classList.add('bottom');\r\n            }\r\n\r\n        },\r\n\t\tfillData () {\r\n        let viousdata = virousdata;\r\n\t\t\t\r\n\t\tvar groupBy = function(xs, key) {\r\n\t\treturn xs.reduce(function(rv, x) {\r\n\t\t\t(rv[x[key]] = rv[x[key]] || []).push(x);\r\n\t\t\t\treturn rv;\r\n\t\t\t}, {});\r\n\t\t\r\n\t\t};\r\n\r\n\t\tvar mm = groupBy(viousdata, 'date');\r\n\r\n\t\tconst vdate = [];\r\n\t\tconst vm = [];\r\n\t\tconst vfm = [];\r\n\t\t\r\n\t\tObject.keys(mm).forEach(id => {\r\n             \r\n\t\t\t vdate.push(id.toString());\r\n\t\t\t \r\n\t\t\t var mmsub = groupBy(mm[id], 'gender');\r\n\t\t\t if (typeof mmsub.male !== \"undefined\" && typeof mmsub.female !== \"undefined\") {\t\t\t \r\n\t\t\t\t\tvm.push(mmsub.male.length);\r\n\t\t\t\t\tvfm.push(mmsub.female.length);\r\n\t\t\r\n\t\t\t\t} else if (typeof mmsub.male !== \"undefined\" && typeof mmsub.female == \"undefined\" ) {\r\n\t\t\t\t\tvm.push(mmsub.male.length);\r\n\t\t\t\t\tvfm.push(0);\r\n\t\t\t\t} else if (typeof mmsub.male == \"undefined\" && typeof mmsub.female !== \"undefined\" ) {\r\n\t\t\t\t\tvm.push(0);\r\n\t\t\t\t\tvfm.push(mmsub.female.length);\r\n\t\t\t\t}\r\n\t\t\t \r\n           });\r\n\r\n\t\tthis.datacollection = {\r\n          labels: vdate,\r\n          datasets: [\r\n            {\r\n              label: 'Male',\r\n              backgroundColor: '#CCFFFF',\r\n              data: vm\r\n            }, {\r\n              label: 'Female',\r\n              backgroundColor: '#FF9999',\r\n              data: vfm\r\n            }\r\n          ]\r\n        }\r\n      }\r\n\t\t\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .small {\r\n    max-width: 400px;\r\n    margin:  10px auto;\r\n  }\r\n</style>"]}